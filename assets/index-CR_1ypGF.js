import{jsxs as l,jsx as e,Fragment as W}from"react/jsx-runtime";import T,{useState as x,useCallback as C,useEffect as D,useRef as We,useContext as le,useMemo as oe}from"react";import{createRoot as Le}from"react-dom/client";import{toast as te,ToastContainer as Fe}from"react-toastify";import{Box as V,Typography as w,List as ee,ListItem as O,ListItemIcon as I,ListItemText as k,Link as Z,ImageList as G,ImageListItem as _,ImageListItemBar as X,Dialog as Re,DialogTitle as $e,DialogContent as Ue,Tabs as ve,Tab as Y,Menu as Pe,MenuItem as J,IconButton as He,Collapse as Ze,Button as ge,Grid2 as de,useTheme as be,useMediaQuery as K,Drawer as Je}from"@mui/material";import U from"leaflet";import{useMap as ye,useMapEvent as Ke,MapContainer as Xe,LayersControl as he,TileLayer as Ye,useMapEvents as Ee,GeoJSON as qe}from"react-leaflet";import{useDroppable as Qe,useSensors as et,useSensor as Me,PointerSensor as tt,KeyboardSensor as rt,DndContext as nt,pointerWithin as ot,DragOverlay as it}from"@dnd-kit/core";import{sortableKeyboardCoordinates as at,arrayMove as Ae,useSortable as lt}from"@dnd-kit/sortable";import{Editor as ct}from"@tinymce/tinymce-react";import{CSS as st}from"@dnd-kit/utilities";import ze from"@mui/material/Button";import dt from"@mui/material/Fade";import ht from"@mui/material/Menu";import xe from"@mui/material/MenuItem";import Ne from"file-saver";import je from"jszip";import pt from"geojson-to-kml";import mt from"turndown";import ut from"axios";import{renderToString as Ce}from"react-dom/server";import Oe from"react-image-gallery";import{v4 as gt}from"uuid";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Be={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Se=T.createContext&&T.createContext(Be),ft=["attr","size","title"];function vt(t,r){if(t==null)return{};var n=bt(t,r),o,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)o=a[i],!(r.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(n[o]=t[o])}return n}function bt(t,r){if(t==null)return{};var n={};for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){if(r.indexOf(o)>=0)continue;n[o]=t[o]}return n}function ie(){return ie=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ie.apply(this,arguments)}function _e(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,o)}return n}function ae(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?_e(Object(n),!0).forEach(function(o){yt(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function yt(t,r,n){return r=wt(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function wt(t){var r=Mt(t,"string");return typeof r=="symbol"?r:r+""}function Mt(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,r||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function De(t){return t&&t.map((r,n)=>T.createElement(r.tag,ae({key:n},r.attr),De(r.child)))}function z(t){return r=>T.createElement(zt,ie({attr:ae({},t.attr)},r),De(t.child))}function zt(t){var r=n=>{var{attr:o,size:i,title:a}=t,d=vt(t,ft),h=i||n.size||"1em",s;return n.className&&(s=n.className),t.className&&(s=(s?s+" ":"")+t.className),T.createElement("svg",ie({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,d,{className:s,style:ae(ae({color:t.color||n.color},n.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),a&&T.createElement("title",null,a),t.children)};return Se!==void 0?T.createElement(Se.Consumer,null,n=>r(n)):r(Be)}function xt(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 13c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm3 5.5h-2.5V21h-1v-2.5H15v-1h2.5V15h1v2.5H21v1z"},child:[]},{tag:"path",attr:{d:"M11.69 15c.36-.75.84-1.43 1.43-2H7v-2h11c1.07 0 2.09.25 3 .69V5c0-1.1-.9-2-2-2h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h6.69c-.44-.91-.69-1.93-.69-3 0-.34.03-.67.08-1H7v-2h4.69zM12 2.75c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75zM7 7h10v2H7V7z"},child:[]}]})(t)}function Ct(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function Ot(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(t)}function St(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 5.7V4h3l-1-1.49L16 1h-5v4.7L2 12v10h7v-5l3.03-2L15 17v5h7V12z"},child:[]}]})(t)}function _t(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 13c1.66 0 3-1.34 3-3S8.66 7 7 7s-3 1.34-3 3 1.34 3 3 3zm12-6h-8v7H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4z"},child:[]}]})(t)}function kt(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"},child:[]}]})(t)}function It(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(t)}function Lt(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 23c-1.03 0-2.06-.25-3-.75-1.89 1-4.11 1-6 0-1.89 1-4.11 1-6 0-.95.5-1.97.75-3 .75H2v-2h1c1.04 0 2.08-.35 3-1 1.83 1.3 4.17 1.3 6 0 1.83 1.3 4.17 1.3 6 0 .91.65 1.96 1 3 1h1v2h-1zM12 5.5c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 12s-1.52.71-3.93 1.37c-.82-.23-1.53-.75-2.07-1.37-.73.84-1.8 1.5-3 1.5s-2.27-.66-3-1.5c-.73.84-1.8 1.5-3 1.5s-2.27-.66-3-1.5c-.54.61-1.25 1.13-2.07 1.37C1.52 18.21 0 17.5 0 17.5s2.93-1.36 7.13-2.08l1.35-4.17c.31-.95 1.32-1.47 2.27-1.16.09.03.19.07.27.11l2.47 1.3 2.84-1.5 1.65-3.71-.51-1.32L18.8 2 22 3.43 20.67 6.4l-1.31.5-3.72 8.34c4.85.63 8.36 2.26 8.36 2.26zm-8.98-4.54-1.52.8-1.75-.92-.71 2.17c.32 0 .64-.01.96-.01.71 0 1.4.03 2.07.08l.95-2.12z"},child:[]}]})(t)}function Pt(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 11V5l-3-3-3 3v2H3v14h18V11h-6zm-8 8H5v-2h2v2zm0-4H5v-2h2v2zm0-4H5V9h2v2zm6 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V9h2v2zm0-4h-2V5h2v2zm6 12h-2v-2h2v2zm0-4h-2v-2h2v2z"},child:[]}]})(t)}function A(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"},child:[]}]})(t)}function Ht(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 4H7V2H5v20h2v-8h14l-2-5 2-5zm-3.86 5.74.9 2.26H7V6h11.05l-.9 2.26-.3.74.29.74zM14 9c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"},child:[]}]})(t)}function Et(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 12h2L12 2 5.05 12H7l-3.9 6h6.92v4h3.95v-4H21l-4-6zM6.79 16l3.9-6H8.88l3.13-4.5 3.15 4.5h-1.9l4 6H6.79z"},child:[]}]})(t)}function At(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4 5.28c-1.23-.37-2.22-1.17-2.8-2.18l-1-1.6c-.41-.65-1.11-1-1.84-1-.78 0-1.59.5-1.78 1.44S7 23 7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3c1 1.15 2.41 2.01 4 2.34V23H19V9h-1.5v1.78zM7.43 13.13l-2.12-.41a.999.999 0 0 1-.79-1.17l.76-3.93a2 2 0 0 1 2.34-1.58l1.16.23-1.35 6.86z"},child:[]}]})(t)}const Nt=()=>l(V,{p:2,children:[e(w,{variant:"body1",children:"Trip Explorer is a simple application that enables users to select points of interest (POIs) from a curated list on a map and export them as a KML (Keyhole Markup Language) file."}),e(w,{variant:"body1",children:"This file can be imported into an offline map such as Organic Maps in case you are travelling to a remote area with no phone coverage."}),l(w,{variant:"body1",children:[e("br",{}),"In addition to selecting POIs, the application allows users to sort and categorize them, making it easy to plan trips in advance using each category as a daily itinerary."]}),l(w,{variant:"body1",children:[e("br",{}),"Selected POIs are saved locally, and the application does not require a frontend or backend server, running entirely in the user's browser.",e("br",{}),e("br",{})]}),e(w,{variant:"h6",children:"Technology"}),l(w,{variant:"body1",children:[e("br",{}),"Trip explorer is built using Typescript, React and Vite.",e("br",{}),"While the application can run on mobile devices, it is not yet optimized for mobile use."]}),l(w,{variant:"body1",children:[e("br",{}),"The map is powered by Leaflet and GeoJSON data is sourced from multiple providers, including:"]}),l(ee,{children:[l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(k,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(Z,{href:"https://www.openstreetmap.org/",target:"_blank",rel:"noopener noreferrer",children:"OpenStreetMap"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(k,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(Z,{href:"https://campermate.com/",target:"_blank",rel:"noopener noreferrer",children:"Campermate"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(k,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(Z,{href:"https://wikicamps.com.au/",target:"_blank",rel:"noopener noreferrer",children:"Wiki Camps"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(k,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(Z,{href:"https://www.bp.com/en_au/australia/home/who-we-are/find-your-nearest-bp.html",target:"_blank",rel:"noopener noreferrer",children:"BP Australia"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(k,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(Z,{href:"https://www.fuelwatch.wa.gov.au/",target:"_blank",rel:"noopener noreferrer",children:"Fuel Watch"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(k,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(Z,{href:"https://exploreparks.dbca.wa.gov.au/",target:"_blank",rel:"noopener noreferrer",children:"Explore Parks WA"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(k,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(Z,{href:"https://www.wavisitorcentre.com.au/",target:"_blank",rel:"noopener noreferrer",children:"Western Australia Visitor Centre"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(k,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(Z,{href:"https://www.westernaustralia.com/",target:"_blank",rel:"noopener noreferrer",children:"Western Australia website"})})})]})]})]}),jt=()=>l(V,{p:2,children:[e(w,{variant:"body1",children:"There are a number of features that could improve the experience using the app:"}),l(ee,{children:[l(O,{children:[e(I,{children:e(A,{})}),e(k,{primary:"Calculate driving/walking distances between POIs"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(k,{primary:"Enable searching on curated information"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(k,{primary:"Allow searching for locations not in the curated information"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(k,{primary:"Allow to create projects to keep different sets of POIs"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(k,{primary:"Improve experience on mobile devices"})]})]}),l(w,{variant:"body1",children:["If you have any suggestions or feedback, please let me know by creating an issue using the"," ",e(Z,{href:"https://github.com/jricardo27/trip_explorer/issues",target:"_blank",rel:"noopener",children:"issue tracker"})]})]}),Bt=()=>l(V,{p:2,children:[l(w,{variant:"body1",children:["This app was written as a hobby project, it's a frontend app running entirely on your browser.",e("br",{}),e("br",{}),"All the information is stored in your browser and nothing leaves it unless you decide to export the data.",e("br",{}),e("br",{}),"The following are technical details for anyone interested:"]}),l(ee,{children:[l(O,{children:[e(I,{children:e(A,{})}),e(k,{primary:"Vite 6 as build tool"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(k,{primary:"React 18 as base library"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(k,{primary:"Typescript 5 as base language"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(k,{primary:"Material Design as UI framework"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(k,{primary:"Leaftlet as map library"})]})]})]});function Dt(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 19m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v1a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M12 16c3.314 0 6 -4.686 6 -8a6 6 0 1 0 -12 0c0 3.314 2.686 8 6 8z"},child:[]},{tag:"path",attr:{d:"M12 9m-2 0a2 7 0 1 0 4 0a2 7 0 1 0 -4 0"},child:[]}]})(t)}function pe(t){return z({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"},child:[]}]})(t)}const Tt=()=>l(V,{p:2,children:[e(w,{variant:"h6",children:"Base layer"}),e(w,{variant:"body1",children:"You can select the base layer to use for the map by opening the layer control on the top-right corner."}),l(G,{children:[e(_,{children:e("img",{src:"help/img/layer_control.webp",alt:"Layer control"})}),e(_,{children:e("img",{src:"help/img/layer_control_open.webp",alt:"Layer control opened"})})]}),l(w,{variant:"body1",children:[e("br",{}),"Current options are:"]}),l(G,{children:[l(_,{children:[e("img",{src:"docs/img/openstreetmap_layer.webp",alt:"OpenStreet Map"}),e(X,{position:"below",title:"OpenStreet Map"})]}),l(_,{children:[e("img",{src:"docs/img/cyclosm_layer.webp",alt:"CyclOSM (slow to load)"}),e(X,{position:"below",title:"CyclOSM (slow to load)"})]}),l(_,{children:[e("img",{src:"docs/img/esri_world_imagery_layer.webp",alt:"Esri World Imagery"}),e(X,{position:"below",title:"Esri World Imagery"})]}),l(_,{children:[e("img",{src:"docs/img/esri_world_street_map_layer.webp",alt:"Esri World Street Map"}),e(X,{position:"below",title:"Esri World Street Map"})]}),l(_,{children:[e("img",{src:"docs/img/esri_world_topographic_map_layer.webp",alt:"Esri World Topographic Map"}),e(X,{position:"below",title:"Esri World Topographic Map"})]})]}),e(w,{variant:"h6",children:"Points of Interest (POIs)"}),e(w,{variant:"body1",children:"On the same layer control on the top-right corner, there's a list of data sources you can choose from."}),l(G,{children:[e(_,{children:e("img",{src:"help/img/overlay_selector.webp",alt:"Overlay Selector"})}),e(_,{children:e("img",{src:"help/img/overlay_selector_with_selection.webp",alt:"Overlay Selector with selection"})})]}),l(w,{variant:"body1",children:[e("br",{}),"Available POIs sources vary depending on the destination. For example, if you are travelling to Western Australia, you can select from the following:"]}),l(G,{children:[l(_,{children:[e("img",{src:"docs/img/national_parks.webp",alt:"Western Australia National Parks"}),e(X,{title:"National Parks in Western Australia"})]}),l(_,{children:[e("img",{src:"help/img/campermate_pois.webp",alt:"Campermate POIs in Western Australia"}),e(X,{title:"Campermate POIs in Western Australia"})]})]}),e(w,{variant:"h6",children:"Saving Points of Interest (POIs)"}),e(w,{variant:"body1",children:"The main feature of the app is the ability to select points of interest (POIs) on the map and export them as a KML. It can be done by:"}),l(ee,{children:[l(O,{children:[e(I,{children:e(pe,{})}),e(k,{primary:"Right clicking on any POI"})]}),l(O,{children:[e(I,{children:e(pe,{})}),e(k,{primary:"Right clicking on any point the map, a custom name can be assigned to the point."})]}),l(O,{children:[e(I,{children:e(pe,{})}),e(k,{primary:"On the POI's popup and using the Save button"})]})]}),l(G,{children:[e(_,{children:e("img",{src:"help/img/context_menu_on_map.webp",alt:"Context menu on map"})}),e(_,{children:e("img",{src:"help/img/save_poi_on_popup.webp",alt:"Save POI from popup"})})]}),e(w,{variant:"h6",children:"POIs Drawer"}),l(w,{variant:"body1",children:[e("br",{}),"The saved POIs can be accessed by opening the hamburger menu in the top-left corner of the map, next to the zoom controls."]}),l(G,{children:[e(_,{children:e("img",{src:"help/img/poi_list_hamburger.webp",alt:"POI saved list hamburger menu"})}),e(_,{children:e("img",{src:"help/img/poi_list_drawer.webp",alt:"POI saved list drawer"})})]}),l(w,{variant:"body1",children:[e("br",{}),"By default, only the"," ",e("strong",{children:"ALL"})," ","category is present, but users can add custom categories, such as"," ",e("strong",{children:"FIRST DAY"})," ","and"," ",e("strong",{children:"SECOND DAY"}),", by right-clicking on the left side of the drawer."]}),l(G,{children:[e(_,{children:e("img",{src:"help/img/category_list_context_menu.webp",alt:"Category list context menu"})}),e(_,{children:e("img",{src:"help/img/category_list_new.webp",alt:"Category list with new category"})})]}),l(w,{variant:"body1",children:[e("br",{}),e("br",{}),"Categories can be rearranged, deleted, or renamed, except for the *ALL* category."]}),e(G,{children:e(_,{children:e("img",{src:"help/img/category_list_second_context_menu.webp",alt:"Category list context menu for categories different from ALL"})})}),l(w,{variant:"body1",children:[e("br",{}),e("br",{}),"Clicking on a POI on the saved list will expand the POI's details. An editor can be toggled into view to append comments to the POI."]}),l(G,{children:[e(_,{children:e("img",{src:"help/img/selection_list_one_element_open.webp",alt:"POI details"})}),e(_,{children:e("img",{src:"help/img/selection_list_one_element_editor.webp",alt:"POI notes editor"})})]}),l(w,{variant:"body1",children:[e("br",{}),e("br",{}),"POI details can also be seen when opening the popup by clicking on the POI on the map. Note that on small screens the gallery will be shown as a tab."]}),l(G,{children:[e(_,{children:e("img",{src:"help/img/feature_general.webp",alt:"POI popup general tab"})}),e(_,{children:e("img",{src:"help/img/feature_more_info.webp",alt:"POI popup more info tab"})}),e(_,{children:e("img",{src:"help/img/feature_gallery.webp",alt:"POI popup gallery"})}),e(_,{children:e("img",{src:"help/img/feature_gallery_mobile.webp",alt:"POI popup gallery tab"})})]}),e(w,{variant:"h6",children:"Exporting"}),l(w,{variant:"body1",children:[e("br",{}),"Saved POIs can be exported as a GeoJSON or KML file, with a zip file automatically downloaded when the desired option is selected.",e("br",{}),e("br",{}),e("strong",{children:"Note:"}),"When exporting to KML, polygons are converted to MultiLineStrings due to a limitation in the Organic Maps app that does not support polygons, the converted MultiLineStrings are shown as tracks.",e("br",{}),e("br",{}),"Google Earth does not have this limitation, and in the future, it may be possible to select whether to export a KML including polygons or not."]}),e(G,{children:e(_,{children:e("img",{src:"help/img/export_menu.webp",alt:"Export Menu"})})})]}),Te=({open:t,onClose:r})=>{const[n,o]=x(0);return l(Re,{open:t,onClose:r,fullWidth:!0,maxWidth:"md",children:[e($e,{children:"Welcome to Trip Explorer"}),l(Ue,{children:[e(V,{sx:{borderBottom:1,borderColor:"divider"},children:l(ve,{value:n,onChange:(a,d)=>{o(d)},variant:"fullWidth",children:[e(Y,{label:"About"}),e(Y,{label:"Tutorial"}),e(Y,{label:"What's Next"}),e(Y,{label:"Technical Stuff"})]})}),n===0&&e(Nt,{}),n===1&&e(Tt,{}),n===2&&e(jt,{}),n===3&&e(Bt,{})]})]})},B=(t,r)=>{var n;return`${t}=${(n=r.properties)==null?void 0:n.id}`},re=t=>t?B(t.index,t.feature):"",P="all",ne=T.createContext(void 0),me="savedFeatures",Gt=({children:t})=>{const[r,n]=x(()=>{const c=localStorage.getItem(me);return c?JSON.parse(c):{all:[]}}),o=C(()=>{localStorage.setItem(me,JSON.stringify(r))},[r]),i=C(()=>{const c=localStorage.getItem(me);c&&n(JSON.parse(c))},[]);D(()=>{o()},[r,o]);const a=C(c=>{n(typeof c=="function"?v=>c(v):c)},[n]),d=C((c,v)=>{v&&a(b=>{const m=[...b[c]||[],v];return c===P?{...b,[c]:m}:{...b,[c]:m,[P]:b[P].filter(u=>{var g,p;return((g=u.properties)==null?void 0:g.id)!==((p=v.properties)==null?void 0:p.id)})}})},[a]),h=C((c,v)=>{if(!v){console.error("No selection info when trying to remove feature");return}a(b=>{const m=(b[c]||[]).filter((u,g)=>B(g,u)!==re(v));return{...b,[c]:m}})},[a]),s=C((c,v)=>{a(b=>{const m={...b};for(const u in m)m[u]=m[u].map(g=>{var p,y;return((p=g.properties)==null?void 0:p.id)===((y=c.properties)==null?void 0:y.id)?v:g});return m})},[a]),f={savedFeatures:r,addFeature:d,removeFeature:h,updateFeature:s,setSavedFeatures:a,saveToLocalStorage:o,loadFromLocalStorage:i};return e(ne.Provider,{value:f,children:t})},Vt={osm:{name:"OpenStreetMap",maxZoom:19,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},CyclOSM:{name:"CyclOSM",maxZoom:20,url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors. Tiles courtesy of <a href="https://www.openstreetmap.fr" target="_blank">OpenStreetMap France</a>'},esriWorldImagery:{name:"Esri World Imagery",maxZoom:19,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},esriWorldStreetMap:{name:"Esri World Street Map",maxZoom:19,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},esriWorldTopoMap:{name:"Esri World Topographic Map",maxZoom:19,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},Wt=()=>{const t=ye();return Ke("moveend",()=>{const r=t.getCenter(),n=t.getZoom(),o={center:[r.lat,r.lng],zoom:n};localStorage.setItem("mapState",JSON.stringify(o))}),null},Ft=({center:t,zoom:r})=>{const n=ye();return D(()=>{t&&r&&n.setView(t,r)},[t,r,n]),null};function Rt(){const t=ye(),[r,n]=x(t.getZoom()),o={background:"white",bottom:"10px",color:"black",left:"10px",padding:"5px",position:"absolute",zIndex:400};return D(()=>{const i=()=>{n(t.getZoom())};return t.on("zoomend",i),()=>{t.off("zoomend",i)}},[t]),l("div",{style:o,children:["Zoom: ",r]})}const $t=({children:t,center:r,overlays:n,contextMenuHandler:o})=>{const i=We(null),[a]=x("esriWorldStreetMap"),[d,h]=x({center:r,zoom:13}),s=()=>(Ee({contextmenu:o}),null),f=C(()=>{const c=localStorage.getItem("mapState");c&&h(JSON.parse(c))},[]);return D(()=>{f()},[f]),e(W,{children:l(Xe,{center:d.center,zoom:d.zoom,ref:i,scrollWheelZoom:!0,style:{height:"100vh",width:"100%"},children:[e(s,{}),e(Wt,{}),e(Ft,{center:d.center,zoom:d.zoom}),e(Rt,{}),l(he,{position:"topright",children:[Object.entries(Vt).map(([c,v])=>e(he.BaseLayer,{name:v.name,checked:a===c,children:e(Ye,{attribution:v.attribution,url:v.url,maxZoom:v.maxZoom||20})},c)),n&&n.map(c=>e(he.Overlay,{name:c.name,checked:c.checked,children:c.children},c.name))]}),t]})})},Ut=({tab:t,onContextMenu:r,value:n,...o})=>{const{setNodeRef:i,node:a}=Qe({id:t,data:{category:t,type:"tab"}});return e(Y,{ref:i,label:t,value:n,onContextMenu:r,sx:{border:a!=null&&a.rect?"1px dashed #ccc":"none"},...o})},fe="--NULL-TAB--",Zt=({tabs:t,selectedTab:r,handleTabChange:n,handleTabContextMenu:o})=>e(ve,{orientation:"vertical",variant:"scrollable",value:r,onChange:n,onContextMenu:i=>o(i,fe),"aria-label":"Saved Features Tabs",sx:{height:"100%"},children:t.map(i=>e(Ut,{tab:i,value:i,onContextMenu:a=>o(a,i)},i))}),Jt=({contextMenu:t,contextMenuTab:r,handleClose:n,moveCategory:o,handleRenameCategory:i,handleAddCategory:a,handleRemoveCategory:d})=>{const h=C(()=>{if(!r||r===fe)return;const c=prompt("Enter new name for category",r);c&&c!==r&&i(c)},[r,i]),s=c=>v=>{c(v),n()},f=c=>{c.preventDefault(),n()};return r?l(Pe,{open:t!==null,onClose:n,onContextMenu:f,anchorReference:"anchorPosition",anchorPosition:t!==null?{top:t.mouseY,left:t.mouseX}:void 0,children:[r&&r!==P&&r!==fe?l(W,{children:[e(J,{onClick:s(()=>o("up")),children:"Move Up"},"move-up"),e(J,{onClick:s(()=>o("down")),children:"Move Down"},"move-down"),e(J,{onClick:s(h),children:"Rename Category"},"rename"),e(J,{onClick:s(d),children:"Remove Category"},"remove")]}):null,e(J,{onClick:s(a),children:"Add New Category"},"add-new")]}):e(W,{})},Kt=({contextMenu:t,contextMenuFeature:r,handleClose:n,handleDuplicate:o,handleRemoveFromList:i,handleRemoveCompletely:a})=>{if(!r)return e(W,{});const d=s=>f=>{s(f),n()};return e(Pe,{open:t!==null,onClose:n,onContextMenu:s=>{s.preventDefault(),n()},anchorReference:"anchorPosition",anchorPosition:t!==null?{top:t.mouseY,left:t.mouseX}:void 0,children:r&&l(W,{children:[e(J,{onClick:d(o),children:"Duplicate"}),r.category!=P&&e(J,{onClick:d(i),children:"Remove from this list"}),e(J,{onClick:d(a),children:"Remove"})]})})},Xt=({children:t,savedFeatures:r,selectedTab:n,setSavedFeatures:o})=>{var c,v;const[i,a]=x(null),d=et(Me(tt),Me(rt,{coordinateGetter:at})),h=C(b=>{a(b.active.id.toString())},[]),s=C(b=>{var g,p;const{active:m,over:u}=b;if(u&&m.id!==u.id){const y=r[n].find((M,S)=>B(S,M)===m.id);if(y){const M=n;let S=n;if(((p=(g=u.data)==null?void 0:g.current)==null?void 0:p.type)==="tab"&&(S=u.id.toString()),M!==S)o(L=>{const H={...L};return H[M]=H[M].filter((j,N)=>B(N,j)!==m.id),H[S]=[...H[S],y],H});else{const L=r[M].findIndex((N,F)=>B(F,N)===m.id),H=r[M].findIndex((N,F)=>B(F,N)===u.id),j=Ae(r[M],L,H);o(N=>({...N,[M]:j}))}}}a(null)},[r,n,o]),f=C(()=>{a(null)},[]);return l(nt,{sensors:d,collisionDetection:ot,onDragStart:h,onDragEnd:s,onDragCancel:f,children:[t,e(it,{children:i?e(O,{children:e(k,{primary:((v=(c=r[n].find((b,m)=>B(m,b)===i))==null?void 0:c.properties)==null?void 0:v.name)||"Unnamed Feature"})}):null})]})},Yt={"tinymce-editor":"_tinymce-editor_10zer_1"},qt=({initialText:t,onChange:r})=>{const[n,o]=x(t),i=a=>{typeof a=="string"&&(o(a),r(a))};return e("div",{className:Yt["tinymce-editor"],children:e(ct,{onChange:i,init:{height:400,width:"100%",menubar:!1,plugins:["lists","advlist","fullscreen","autolink","charmap","code","image","link","table"],toolbar:["undo redo bold italic backcolor image charmap link | advlist bullist numlist outdent indent table | code  fullscreen"],skin_url:"./tinymce/skins/ui/oxide"},value:n,onEditorChange:i,licenseKey:"gpl"})})},Qt=({feature:t,id:r,index:n,selectedTab:o,selectedFeature:i,setSelectedFeature:a,handleContextMenu:d})=>{var p;const{attributes:h,listeners:s,setNodeRef:f,transform:c,transition:v,isDragging:b}=lt({id:r}),m={transform:st.Transform.toString(c),transition:v,opacity:b?.5:1,border:b?"dashed":""},u=re(i)===B(n,t),g={feature:t,index:n,category:o};return l(O,{ref:f,style:m,onClick:y=>{y.stopPropagation(),a(u?null:g)},onContextMenu:y=>{d(y,g),y.stopPropagation()},button:"true",children:[e(I,{children:e(He,{edge:"start","aria-label":"drag",...s,...h,sx:{cursor:"grab","&:active":{cursor:"grabbing"}},children:e(Ct,{})})}),e(k,{primary:((p=t.properties)==null?void 0:p.name)||"Unnamed Feature"})]})},er=({features:t,setSavedFeatures:r,selectedTab:n,selectedFeature:o,setSelectedFeature:i,handleContextMenu:a,excludedProperties:d})=>{const[h,s]=x(!1),[f,c]=x(""),v=u=>{var g;h?(s(!1),c("")):(c(((g=u.properties)==null?void 0:g.tripNotes)||""),s(!0))},b=u=>{c(u)},m=()=>{o&&r(u=>{const g=[...u[n]],p=g.findIndex((y,M)=>B(M,y)===re(o));return p!==-1&&g[p].properties&&(g[p].properties.tripNotes=f),{...u,[n]:g}})};return D(()=>{!o&&h&&(s(!1),c(""))},[h,o,c,s]),e(ee,{children:t.map((u,g)=>l(T.Fragment,{children:[e(Qt,{feature:u,id:B(g,u),index:g,selectedTab:n,selectedFeature:o,setSelectedFeature:i,handleContextMenu:a}),l(Ze,{in:re(o)===B(g,u),timeout:"auto",unmountOnExit:!0,children:[e(O,{sx:{pl:4},children:e(ge,{onClick:()=>v(u),children:"Add/edit notes"})}),h&&l(W,{children:[e(O,{sx:{pl:4},children:e(qt,{initialText:f,onChange:b},B(g,u))}),e(O,{sx:{pl:4},children:e(ge,{onClick:m,children:"Save notes"})})]}),e(ee,{component:"div",disablePadding:!0,children:Object.entries(u.properties||{}).filter(([p])=>!d.includes(p)).map(([p,y])=>e(O,{sx:{pl:4},children:e(k,{primary:`${p}: ${y}`})},p))})]})]},B(g,u)))})},tr=(t,r,n,o)=>{const i=C(s=>{if(!o||o===P)return;const f=Object.keys(n),c=f.indexOf(o);if(c===-1)return;let v;if(s==="up"&&c>1)v=c-1;else if(s==="down"&&c<f.length-1)v=c+1;else return;const b=Ae(f,c,v),m=Object.fromEntries(b.map(u=>[u,n[u]]));t(m)},[o,n,t]),a=C(s=>{o&&o!==P&&s!==P&&t(f=>{const c={...f};c[s]=c[o],delete c[o];const v=Object.keys(c),b=v.indexOf(o);return b!==-1&&v.splice(b,1,s),Object.fromEntries(v.map(m=>[m,c[m]]))})},[o,t]),d=C(()=>{let s=prompt("Enter name for category");(!s||Object.keys(n).includes(s))&&(s=`Category_${Object.keys(n).length}`),t(f=>({...f,[s]:[]}))},[n,t]),h=C(()=>{if(o&&o!==P){t(v=>{const b=v[o],m={...v};return delete m[o],m[P]=[...m[P],...b],m});const s=Object.keys(n),f=s.indexOf(o),c=s[f-1];r(c)}},[o,t,r,n]);return{moveCategory:i,handleRenameCategory:a,handleAddCategory:d,handleRemoveCategory:h}},rr=()=>{const[t,r]=x(null),[n,o]=x(null),[i,a]=x(null),d=C((f,c,v)=>{f.preventDefault(),f.stopPropagation(),r({mouseX:f.clientX+2,mouseY:f.clientY-6}),a(c||null),o(v||null)},[]),h=C((f,c)=>{d(f,void 0,c)},[d]),s=C(()=>{r(null),o(null),a(null)},[]);return{contextMenu:t,contextMenuTab:n,contextMenuFeature:i,handleContextMenu:d,handleTabContextMenu:h,handleClose:s}},nr=(t,r,n,o)=>{const i=C(()=>{n&&t(h=>({...h,[r]:[...h[r],n.feature]}))},[n,r,t]),a=C(()=>{n&&r!==P&&(o(r,n),t(h=>({...h,[P]:[...h[P],n.feature]})))},[n,r,o,t]),d=C(()=>{n&&(o(r,n),t(h=>({...h,[P]:h[P].filter((s,f)=>B(f,s)!==re(n))})))},[n,r,o,t]);return{handleDuplicate:i,handleRemoveFromList:a,handleRemoveCompletely:d}},or=()=>{const[t,r]=x(null),n=C(o=>{r(i=>i===o?null:o)},[]);return{selectedFeature:t,setSelectedFeature:n}},ir=t=>{const r=new je;Object.entries(t).map(([n,o])=>{const i={type:"FeatureCollection",features:o};r.file(`${n}.geojson`,JSON.stringify(i))}),r.generateAsync({type:"blob"}).then(n=>{Ne.saveAs(n,"trip_explorer_features.json.zip")})},ar=t=>{var n,o,i,a,d;const r={...t};if(r.properties||(r.properties={}),(n=t.properties)!=null&&n.tripNotes){const s=new mt().turndown(t.properties.tripNotes);s&&(r.properties.description=s+`

--------------------

`+r.properties.description)}return(o=r.properties)==null||delete o.id,(i=r.properties)==null||delete i.style,(a=r.properties)==null||delete a.images,(d=r.properties)==null||delete d.tripNotes,r},lr=t=>{if(t.geometry.type==="Polygon")return{...t,geometry:{type:"MultiLineString",coordinates:[t.geometry.coordinates[0]]}};if(t.geometry.type==="MultiPolygon"){const r=t.geometry.coordinates.map(n=>n[0]);return{...t,geometry:{type:"MultiLineString",coordinates:r}}}else return t},cr=t=>{const r=new je;Object.entries(t).map(([n,o])=>{const i={type:"FeatureCollection",features:o.map(d=>(d=ar(d),d=lr(d),d))},a=pt(i);r.file(`${n}.kml`,a)}),r.generateAsync({type:"blob"}).then(n=>{Ne.saveAs(n,"trip_explorer_features.kml.zip")})},sr=()=>{const{savedFeatures:t}=le(ne),[r,n]=x(null),[o,i]=x(!1),a=!!r,d=v=>{n(v.currentTarget)},h=()=>{n(null)},s=v=>b=>{v(b),h()},f=()=>i(!0),c=()=>i(!1);return l(de,{container:!0,spacing:3,sx:{flexGrow:1},children:[l(de,{size:4,children:[e(ze,{id:"fade-button","aria-controls":a?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":a?"true":void 0,onClick:d,children:"Export"}),l(ht,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:r,open:a,onClose:h,TransitionComponent:dt,children:[e(xe,{onClick:s(()=>ir(t)),children:"To GeoJson"}),e(xe,{onClick:s(()=>cr(t)),children:"To KML"})]})]}),l(de,{size:{xs:3,sm:3,md:2,lg:2,xl:2},offset:"auto",children:[l(ze,{onClick:f,children:["Help ",e(Ot,{})]}),e(Te,{open:o,onClose:c})]})]})},dr=["id","images","style"],hr=({drawerOpen:t,onClose:r,setCurrentCategory:n})=>{const[o,i]=x(P),{savedFeatures:a,setSavedFeatures:d,removeFeature:h}=le(ne),{selectedFeature:s,setSelectedFeature:f}=or(),{contextMenu:c,contextMenuTab:v,contextMenuFeature:b,handleContextMenu:m,handleTabContextMenu:u,handleClose:g}=rr(),{moveCategory:p,handleRenameCategory:y,handleAddCategory:M,handleRemoveCategory:S}=tr(d,i,a,v),{handleDuplicate:L,handleRemoveFromList:H,handleRemoveCompletely:j}=nr(d,o,b,h),N=be(),F=K(N.breakpoints.down("sm")),q=K(N.breakpoints.between("sm","md")),E=K(N.breakpoints.between("md","lg"))?"70%":q?"50%":F?"92%":"50%",R=C((Q,se)=>{i(se),f(null)},[f]);return D(()=>{n&&n(o)},[o,n]),l(W,{children:[e(He,{onClick:r,style:{position:"absolute",top:10,left:40,zIndex:1e3},children:e(It,{})}),l(Xt,{savedFeatures:a,selectedTab:o,setSavedFeatures:d,children:[l(Je,{anchor:"left",open:t,onClose:r,sx:{width:E,flexShrink:0,"& .MuiDrawer-paper":{width:E,boxSizing:"border-box"}},children:[e(V,{sx:{display:"flex",height:"50px",border:"1px solid #ccc"},children:e(sr,{})}),l(V,{sx:{display:"flex",height:"100%"},children:[e(V,{sx:{width:150,bgcolor:"background.paper",borderRight:1,borderColor:"divider"},children:e(Zt,{tabs:Object.keys(a),selectedTab:o,handleTabChange:R,handleTabContextMenu:u})}),e(V,{sx:{flexGrow:1,overflowY:"auto"},children:e(er,{features:a[o]||[],setSavedFeatures:d,selectedTab:o,selectedFeature:s,setSelectedFeature:f,handleContextMenu:m,excludedProperties:Array.from(dr)})})]})]}),e(Jt,{contextMenu:c,contextMenuTab:v,handleClose:g,moveCategory:p,handleRenameCategory:y,handleAddCategory:M,handleRemoveCategory:S}),e(Kt,{contextMenu:c,contextMenuFeature:b,handleClose:g,handleDuplicate:L,handleRemoveFromList:H,handleRemoveCompletely:j})]})]})};function Ge(t,r){const n={...t};return ue(t)&&ue(r)&&Object.keys(r).forEach(o=>{ue(r[o])?o in t?n[o]=Ge(t[o],r[o]):Object.assign(n,{[o]:r[o]}):Object.assign(n,{[o]:r[o]})}),n}function ue(t){return t&&typeof t=="object"&&!Array.isArray(t)}const pr=t=>{const[r,n]=x({}),[o,i]=x(!0),[a,d]=x(null);return D(()=>{(async()=>{i(!0);try{const s={},c=t.map(async m=>{const u=await ut.get(m,s);return[m,u.data]}),b=(await Promise.all(c)).reduce((m,[u,g])=>{const p=g.properties||{};return g.features.forEach(y=>{if(y.type!=="Feature"){console.warn("Skipping non-feature item in features array");return}y.properties={...p,...y.properties},Object.keys(p).forEach(M=>{var S;if(typeof p[M]=="object"&&p[M]!==null){const L=(S=y.properties)==null?void 0:S[M];typeof L=="object"&&L!==null?y.properties[M]=Ge(p[M],L):y.properties[M]=p[M]}})}),m[u]=g,m},{});n(b)}catch(s){s instanceof Error&&d(s.message)}finally{i(!1)}})()},[t]),o?{...r,loading:!0}:a?(console.error(a),{...r,error:a}):r},mr="_scrollableContent_z5154_1",ur="_tabsContainer_z5154_10",$={scrollableContent:mr,tabsContainer:ur};function gr(t){return z({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679q.05.242.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.8.8 0 0 0 .381-.404l.792-1.848ZM3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2m10 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2zM2.906 5.189a.51.51 0 0 0 .497.731c.91-.073 3.35-.17 4.597-.17s3.688.097 4.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 11.691 3H4.309a.5.5 0 0 0-.447.276L2.906 5.19Z"},child:[]}]})(t)}function fr(t){return z({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 3a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 3m8 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5m-13.5.5a.5.5 0 0 0 0-1h-2a.5.5 0 0 0 0 1zm11.157-6.157a.5.5 0 0 1 0 .707l-1.414 1.414a.5.5 0 1 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m-9.9 2.121a.5.5 0 0 0 .707-.707L3.05 5.343a.5.5 0 1 0-.707.707zM8 7a4 4 0 0 0-4 4 .5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5 4 4 0 0 0-4-4m0 1a3 3 0 0 1 2.959 2.5H5.04A3 3 0 0 1 8 8"},child:[]}]})(t)}function vr(t){return z({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5z"},child:[]},{tag:"path",attr:{d:"M1 2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8a2 2 0 0 1 2 2v.5a.5.5 0 0 0 1 0V8h-.5a.5.5 0 0 1-.5-.5V4.375a.5.5 0 0 1 .5-.5h1.495c-.011-.476-.053-.894-.201-1.222a.97.97 0 0 0-.394-.458c-.184-.11-.464-.195-.9-.195a.5.5 0 0 1 0-1q.846-.002 1.412.336c.383.228.634.551.794.907.295.655.294 1.465.294 2.081v3.175a.5.5 0 0 1-.5.501H15v4.5a1.5 1.5 0 0 1-3 0V12a1 1 0 0 0-1-1v4h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1zm9 0a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v13h8z"},child:[]}]})(t)}function br(t){return z({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M7.293 1.5a1 1 0 0 1 1.414 0L11 3.793V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v3.293l2.354 2.353a.5.5 0 0 1-.708.708L8 2.207l-5 5V13.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 2 13.5V8.207l-.646.647a.5.5 0 1 1-.708-.708z"},child:[]},{tag:"path",attr:{d:"M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0m-3.5-2a.5.5 0 0 0-.5.5v1.5a.5.5 0 1 0 1 0V11a.5.5 0 0 0-.5-.5m0 4a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"},child:[]}]})(t)}function yr(t){return z({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"},child:[]},{tag:"path",attr:{d:"M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z"},child:[]}]})(t)}function wr(t){return z({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 448h-24.68L359.54 117.75l53.41-73.55c5.19-7.15 3.61-17.16-3.54-22.35l-25.9-18.79c-7.15-5.19-17.15-3.61-22.35 3.55L320 63.3 278.83 6.6c-5.19-7.15-15.2-8.74-22.35-3.55l-25.88 18.8c-7.15 5.19-8.74 15.2-3.54 22.35l53.41 73.55L40.68 448H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h608c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM320 288l116.36 160H203.64L320 288z"},child:[]}]})(t)}function Mr(t){return z({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M616 192H480V24c0-13.26-10.74-24-24-24H312c-13.26 0-24 10.74-24 24v72h-64V16c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v80h-64V16c0-8.84-7.16-16-16-16H80c-8.84 0-16 7.16-16 16v80H24c-13.26 0-24 10.74-24 24v360c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V216c0-13.26-10.75-24-24-24zM128 404c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm128 192c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm160 96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12V76c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm160 288c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40z"},child:[]}]})(t)}function zr(t){return z({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0z"},child:[]}]})(t)}function xr(t){return z({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M206.86 245.15c-35.88 10.45-59.95 41.2-57.53 74.1 11.4-12.72 28.81-23.7 49.9-30.92l7.63-43.18zM95.81 295L64.08 115.49c-.29-1.62.28-2.62.24-2.65 57.76-32.06 123.12-49.01 189.01-49.01 1.61 0 3.23.17 4.85.19 13.95-13.47 31.73-22.83 51.59-26 18.89-3.02 38.05-4.55 57.18-5.32-9.99-13.95-24.48-24.23-41.77-27C301.27 1.89 277.24 0 253.32 0 176.66 0 101.02 19.42 33.2 57.06 9.03 70.48-3.92 98.48 1.05 126.58l31.73 179.51c14.23 80.52 136.33 142.08 204.45 142.08 3.59 0 6.75-.46 10.01-.8-13.52-17.08-28.94-40.48-39.5-67.58-47.61-12.98-106.06-51.62-111.93-84.79zm97.55-137.46c-.73-4.12-2.23-7.87-4.07-11.4-8.25 8.91-20.67 15.75-35.32 18.32-14.65 2.58-28.67.4-39.48-5.17-.52 3.94-.64 7.98.09 12.1 3.84 21.7 24.58 36.19 46.34 32.37 21.75-3.82 36.28-24.52 32.44-46.22zM606.8 120.9c-88.98-49.38-191.43-67.41-291.98-51.35-27.31 4.36-49.08 26.26-54.04 54.36l-31.73 179.51c-15.39 87.05 95.28 196.27 158.31 207.35 63.03 11.09 204.47-53.79 219.86-140.84l31.73-179.51c4.97-28.11-7.98-56.11-32.15-69.52zm-273.24 96.8c3.84-21.7 24.58-36.19 46.34-32.36 21.76 3.83 36.28 24.52 32.45 46.22-.73 4.12-2.23 7.87-4.07 11.4-8.25-8.91-20.67-15.75-35.32-18.32-14.65-2.58-28.67-.4-39.48 5.17-.53-3.95-.65-7.99.08-12.11zm70.47 198.76c-55.68-9.79-93.52-59.27-89.04-112.9 20.6 25.54 56.21 46.17 99.49 53.78 43.28 7.61 83.82.37 111.93-16.6-14.18 51.94-66.71 85.51-122.38 75.72zm130.3-151.34c-8.25-8.91-20.68-15.75-35.33-18.32-14.65-2.58-28.67-.4-39.48 5.17-.52-3.94-.64-7.98.09-12.1 3.84-21.7 24.58-36.19 46.34-32.37 21.75 3.83 36.28 24.52 32.45 46.22-.73 4.13-2.23 7.88-4.07 11.4z"},child:[]}]})(t)}function Cr(t){return z({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.31 72.57L439.43 4.69c-6.25-6.25-16.38-6.25-22.63 0l-22.63 22.63c-6.25 6.25-6.25 16.38 0 22.63l-76.67 76.67c-46.58-19.7-102.4-10.73-140.37 27.23L18.75 312.23c-24.99 24.99-24.99 65.52 0 90.51l90.51 90.51c24.99 24.99 65.52 24.99 90.51 0l158.39-158.39c37.96-37.96 46.93-93.79 27.23-140.37l76.67-76.67c6.25 6.25 16.38 6.25 22.63 0l22.63-22.63c6.24-6.24 6.24-16.37-.01-22.62zM179.22 423.29l-90.51-90.51 122.04-122.04 90.51 90.51-122.04 122.04z"},child:[]}]})(t)}function Or(t){return z({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M25 41v446h30V41zm56.8 40.15c-.1 14.49 1.03 25.35 3.31 32.75 2.77 8.9 6.33 12.9 12.45 16 11.34 5.7 35.34 5.3 70.54 5.1.8-8.5-.5-15.1-3.2-20.4-3.5-6.8-9.4-12.2-18.1-16.86-15.4-8.19-39.1-12.83-65-16.59zM457 105v382h30V105zM73 153v46h238v-46zm256 0v46h110v-46zm-18 64v158h18v-46h110v-18H329v-46h110v-18H329v-30zM81.79 321.3c-.1 14.4 1.03 25.3 3.3 32.6 2.78 9 6.33 13 12.46 16 11.35 5.7 35.35 5.3 70.55 5.1.8-8.5-.5-15-3.2-20.3-3.4-6.8-9.4-12.2-18.1-16.8-15.4-8.2-39.1-12.8-65.01-16.6zM73 393v46h238v-46zm256 0v46h110v-46z"},child:[]}]})(t)}function Sr(t){return z({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M47 145c-10 0-23 12.4-23 24.9v134.3l52.49 7.5C84.97 297 100.9 287 119 287c21 0 39 13.3 45.9 32h188.2c6.9-18.7 24.9-32 45.9-32s39 13.3 45.9 32H488v-77.2L456.5 145zm-9 14h405.6l25.6 82H296v64h-98v-64H38zm18 18v46h62v-46zm80 0v46h62v-46zm80 0v110h22V177zm40 0v110h22V177zm40 0v46h62v-46zm86.6 0v46h62.2l-14.4-46zM119 305c-17.2 0-31 13.8-31 31s13.8 31 31 31 31-13.8 31-31-13.8-31-31-31zm280 0c-17.2 0-31 13.8-31 31s13.8 31 31 31 31-13.8 31-31-13.8-31-31-31zm-280 23a8 8 0 0 1 8 8 8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm280 0a8 8 0 0 1 8 8 8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8z"},child:[]}]})(t)}function _r(t){return z({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M247 80v53h-26v48h-34.027l-2.54 18.154-38.408-3.205-2.05 18.102 37.988 2.994-4.578 34.312-25.592 13.96 22.006 65.107a1658.637 1658.637 0 0 0-137.914 15.91l2.812 17.777a1639.075 1639.075 0 0 1 121.096-14.529l-.078.31c112.547 28.156 190.551 43.088 306.816-8.958l-7.355-16.43a485.085 485.085 0 0 1-26.844 11.092c-29.894-4.015-61.118-6.653-93.156-8.053l21.031-62.227-25.592-13.959L325.027 181H291v-48h-26V80h-18zm-8 71h34v30h-34v-30zm-35.973 48h103.946l6.16 40.639L256 211.748l-57.133 27.89 4.16-40.638zM256 232.252v94.346c-5.41.103-10.833.238-16.262.402h-46.46l-21.071-52.316L256 232.252zM298.17 254c8.836 0 16 7.163 16 16s-7.164 16-16 16c-8.837 0-16-7.163-16-16s7.163-16 16-16zm-56.92 91h82.404c22.502.709 44.618 2.01 66.149 3.96-58.924 14.561-109.381 9.793-169.532-3.194A1523.33 1523.33 0 0 1 241.25 345zm-132.865 29.363c-7.943-.023-15.667.234-23.084.842l1.469 17.941c54.39-4.455 133.014 12.49 189.199 17.202 55.64 4.665 109.966-1.684 168.654-13.512l-3.557-17.645c-57.8 11.65-110.279 17.692-163.591 13.221-47.153-3.954-113.49-17.885-169.09-18.049zm20.22 35.285c-12.198-.079-25.387.615-38.517 1.873-26.26 2.518-51.6 7.157-67.865 14.26l7.203 16.496c12.302-5.372 37.244-10.427 62.38-12.838 25.138-2.41 51.157-2.311 65.846.625 32.956 6.589 91.409 16.938 138.62 15.444l-.569-17.99c-44.053 1.394-102.073-8.619-134.523-15.106-9.17-1.833-20.376-2.684-32.575-2.764z"},child:[]}]})(t)}function kr(t){return z({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M236.422 98.393c-126.642-1.276-206.07 46.77-212.058 83.93-2.977 41.18-4.165 83.628-4.016 124.617l4.31 3.796c3.963-15.315 6.47-31.843 14.122-44.085 1.3 27.18 5.068 58.562 11.369 82.067-2.477 24.988-2.118 47.99-3.436 72.978 21.158 12.726 60.485 10.65 67.541 1.986 2.936-20.695 4.981-42.58 3.973-68.535l7.592-35.355c6.418-14.587 25.29-17.243 23.406-31.799l17.828-2.467c.355 25.196-14.375 27.1-24.713 41.653 12.994 5.357 14.676 3.886 24.059 5.124 23.848 2.742 45.234 3.774 67.802-8.175l-3.101-17.541 17.723-3.135 3.064 17.328c4.22 14.097 11.996 104.392 18.559 108.361 13.411 6.417 53.823 6.417 55.472-5.312 1.647-45.786 3.861-90.1-5.07-133.242 3.702-4.1 7.34-8.112 10.928-12.096-20.178-10.157-44.214-25.838-57.62-41.797-9.037-17.21-13.75-38.688-17.304-56.256-2.546-12.943-4.3-26.074-3.81-37.486.244-5.706 1.003-11.018 2.982-15.938 19.848-20.186 56.606-35.68 79.58-46.503-33.273-7.269-71.55 7.386-99.182 17.882zm128.934-9.931c-29.757 10.977-72.215 22.174-92.633 45.267-.807 2.008-1.51 5.563-1.7 9.994-.38 8.863 1.097 21.093 3.487 33.243 2.39 12.15 5.644 24.32 8.53 33.642 1.442 4.662 2.797 8.624 3.865 11.44 15.216 22.215 45.646 39.625 67.966 44.959l14.495-28.713c-11.574-15.04-13.779-35.226-4.59-50.352 4.932-6.143 9.727-10.553 16.982-10.416 4.545.109 9.194 1.996 12.856 5.045 25.905 21.572 49.481 48.69 83.37 70.66-.136-6.626-.26-12.94-.243-18.761.026-9.03-18.924-97.759-50.614-139.553-22.918-5.83-40.343-9.14-61.771-6.455zm68.883 76.232c4.327-.07 8.421.563 11.857 2.319.061 4.922-.298 10.035-10.887 16.152-4.501-4.72-11.239-10.838-17.908-15.627 5.427-1.506 11.374-2.754 16.938-2.844zm-54.233 32.838c-2.263 3.593-3.912 11.657-2.703 17.531 1.402 6.812 9.062 16.901 21.55 26.47 12.49 9.567 29.242 18.77 46.753 26.087 15.609 6.522 31.748 11.435 46.058 14.19-49.78-25.118-79.482-61.19-108.566-85.409-1.548-1.595-2.387.034-3.092 1.131zm58.914 86.797c.526 23.427-2.416 50.265-17.086 59.894-11.128 7.306-33.235 1.34-38.41-10.925-3.657-8.667 15.567-15.677 13.408-24.832-1.718-7.287-11.033-14.374-18.375-12.912-17.881 3.558-34.905 28.836-29.3 46.185 10.14 31.387 62.177 51.105 91.875 36.75 27.49-13.288 35.058-46.714 36.808-81.19-12.704-3.13-25.983-7.579-38.92-12.97zm-200.681 52.52a129.415 129.415 0 0 1-9.993 4.34l-8.67 77.603c1.22 8.802 15.819 12.647 30.385 12.81zm-100.65 4.519c-1.341 10.733-2.367 21.785-3.073 30.953-1.545 20.225-2.483 41.562-2.496 51.49 18.869 11.927 54.798 4.533 53.105-2.005-.656-27.278-6.002-49.806-12.58-73.717-11.983-1.258-23.524-3.864-34.957-6.721z"},child:[]}]})(t)}function Ir(t){return z({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M279.27 114.408l-2.297 9.184H87v18h185.473l-7.5 30h46.054l-7.5-30H489v-18H299.027l-2.297-9.184h-17.46zM26.623 173.592l14.62 87.724-12.757 38.276H44.27l32.548-32.547L197.94 284.35l2.11 4.216c7.196 14.39 18.094 25.306 28.942 32.538C239.84 328.334 251 331.592 256 331.592h128c23 0 46.04-3.978 62.346-11.225 8.152-3.623 14.546-8.035 18.63-12.703 1.744-1.993 3.066-3.993 4.034-6.072H314.066l-48-112H259l-64 48H74.437l-32-64H26.623zm259.025 16l40.286 94h44.418l-40.286-94h-44.418zm64.2.47l40.086 93.53h79.138c-7.773-34.538-24.96-56.882-47.127-71.49-20.674-13.625-46.067-20.328-72.097-22.04zm46.525 159.186c-4.108.223-8.24.344-12.373.344h-6.488l10 30h-87.024l10-30h-18.976l-10 30H199v18h251.967l24.02-17.764 7.236-5.35-10.703-14.474-7.237 5.35-19.25 14.238h-38.545l-10.115-30.344z"},child:[]}]})(t)}function Lr(t){return z({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M424.188 85.594c.33.05-.86.094-3.313.094-18.512 0-35.78 20.06-35.78 47.5 0 13.83 4.712 26.208 11.624 34.78l10.217 12.626-16.062 2.47c-10.56 1.617-17.663 6.432-23.625 14.342s-10.344 19.18-13.25 32.344c-5.186 23.492-5.59 52.425-5.625 78.156h30.438l.593 8.72 7.094 106.593h65.813l8.03-106.69.657-8.624h32c-.24-25.383-1.62-53.933-7.344-77.25-3.213-13.086-7.783-24.354-13.687-32.375-5.905-8.02-12.7-12.85-22.064-14.593l-15.72-2.937 10.283-12.25c7.228-8.623 12.186-21.138 12.186-35.313 0-25.74-15.5-45.406-32.28-47.562l-.188-.03zm-244.75 3.375c-45.9.006-99.844 5.373-161.625 17.905V126c268.018-37.648 341.545 38.15 226.25 79.344-117.327 41.92-210.503 252.258 159.406 270.594 4.362.438 8.85.687 13.436.687 22.28 0 42.34-5.452 56.125-13.594 13.787-8.14 20.595-18.14 20.595-27.905s-6.808-19.764-20.594-27.906c-.23-.138-.482-.272-.717-.408l-2 26.47-.657 8.656H369l-.563-8.75-3.28-49.5c-128.194 2.8-163.256-100.51-80.094-130.47 20.385-7.344 37.086-15.836 50.187-25.03.17-.822.32-1.655.5-2.47 3.262-14.774 8.256-28.498 16.594-39.562 4.946-6.563 11.24-12.07 18.72-15.97-3.124-42.547-68.335-81.236-191.627-81.217z"},child:[]}]})(t)}function Pr(t){return z({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M323.9 19.81l-55.2 55.15L285 91.24 272.2 104 256 87.73 19.81 323.9l45.57 45.6c28.5-14.6 56.22-11.7 72.52 4.6 16.3 16.3 19.2 44 4.6 72.5l45.6 45.6 236.1-236.1-16.2-16.3 12.8-12.8 16.3 16.2 55.1-55.1-45.6-45.6c-28.5 14.6-56.2 11.7-72.5-4.6-16.3-16.3-19.2-44.02-4.6-72.52zm-16.2 93.99l33.9 34-12.8 12.8-33.9-34zM256 130.2L381.8 256 222.1 415.8 96.16 289.9 249.6 136.5zm0 25.4L121.6 289.9l100.5 100.5L356.4 256zm108.2 14.8l34 33.9-12.8 12.8-34-33.9z"},child:[]}]})(t)}const Hr=t=>z({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"},child:[]}]})(t),Er={bs:{BsBrightnessAltHigh:fr,BsFillCarFrontFill:gr,BsFuelPump:vr,BsHouseExclamation:br,BsImage:yr},fa:{FaCampground:wr,FaCity:Mr,FaMapMarker:zr,FaTheaterMasks:xr,FaWineBottle:Cr},gi:{GiBunkBeds:Or,GiBus:Sr,GiCruiser:_r,GiElephant:kr,GiHelicopter:Ir,GiJourney:Lr,GiTicket:Pr},md:{MdFestival:St,MdHotel:_t,MdKayaking:Lt,MdLocationCity:Pt,MdOutlineHiking:At,MdOutlinePark:Et,MdOutlineTour:Ht,MdRestaurant:kt},tb:{TbAirBalloon:Dt}},Ar=(t,r="grey",n="grey")=>{var d;const[o,i]=t.split("/"),a=(d=Er[o])==null?void 0:d[i];return a?U.divIcon({html:`
    <div style="position: relative;">
      ${Ce(e(Hr,{size:32,color:r}))}
      <div style="position: absolute; top: 45%; left: 65%; transform: translate(-50%, -50%);">
        ${Ce(e(a,{size:16,color:n}))}
      </div>
    </div>
  `,iconSize:[24,24],iconAnchor:[12,24],className:"custom-icon"}):(console.error(`Icon "${t}" not found in "${o}" set`),U.divIcon({html:"",className:"custom-icon"}))},Nr=({feature:t,tabMapping:r,containerProps:n,bottomMenu:o})=>{var v;const[i,a]=x(0),d=be(),h=K(d.breakpoints.down("sm")),s=K(d.breakpoints.between("sm","md")),f=(b,m)=>{a(m)},c=(v=t.properties)!=null&&v.images?t.properties.images.map(b=>{const m=typeof b=="string"?b:b.src,u=typeof b=="string"?"":b.title;return{original:m,thumbnail:m,originalTitle:u,thumbnailTitle:u}}):[];return l("div",{style:{display:"flex",flexDirection:"column"},children:[l("div",{style:{display:"flex",flexDirection:"row",height:(n==null?void 0:n.height)||"400px"},children:[l("div",{className:$.tabsContainer,children:[l(ve,{value:i,onChange:f,children:[Object.keys(r).map(b=>e(Y,{label:b},b)),(h||s)&&c.length>0&&e(Y,{label:"Gallery"})]}),Object.entries(r).map(([b,m],u)=>e("div",{role:"tabpanel",hidden:i!==u,id:`tabpanel-${u}`,children:i===u&&e(V,{sx:{p:1},children:m.map(g=>{if(!t.properties)return null;let p=null,y="",M="",S=!1,L=!0,H="div",j="subtitle1";return typeof g=="string"?(y=g,p=t.properties[g]):(y=g.key,p=t.properties[g.key],M=g.className||"",S=g.isHtml||!1,L=!1),L&&(typeof p=="string"||typeof p=="number"||typeof p=="boolean")?l(w,{variant:"subtitle1",children:[l("strong",{children:[y,":"]}),l("span",{children:[" ",String(p)]})]},y):(typeof p=="object"&&p!==null&&(p=JSON.stringify(p,null,2),H="pre",j="body2"),l("div",{style:{marginBottom:"8px"},children:[e(w,{variant:"subtitle1",children:l("strong",{children:[y,":"]})}),p&&!S&&e(w,{component:H,variant:j,className:M,children:String(p)}),p&&S&&e(w,{component:"div",className:M,dangerouslySetInnerHTML:{__html:p}})]},y))})})},b)),(h||s)&&c.length>0&&e("div",{role:"tabpanel",hidden:i!==Object.keys(r).length,id:`tabpanel-${Object.keys(r).length}`,style:{display:i===Object.keys(r).length?"block":"none"},children:i===Object.keys(r).length&&e(V,{sx:{p:1},children:e(Oe,{items:c,showNav:!1,showPlayButton:!1})})})]}),!(h||s)&&c.length>0&&e("div",{style:{width:"50%",flex:1},children:e(Oe,{items:c,showNav:!1,showPlayButton:!1})})]}),o&&e("div",{style:{height:"30px",borderTop:"1px solid #ccc",display:"flex",justifyContent:"flex-end",alignItems:"center"},children:o})]})},ke=({data:t,popupTabMapping:r,popupTabMappingExtra:n,popupOpenHandler:o,contextMenuHandler:i,popupProps:a,popupContainerProps:d,popupActionButtons:h})=>{const s=C((m,u)=>{var S,L,H,j,N,F;const g=((L=(S=m.properties)==null?void 0:S.style)==null?void 0:L.icon)||"fa/FaMapMarker",p=((j=(H=m.properties)==null?void 0:H.style)==null?void 0:j.color)||"grey",y=((F=(N=m.properties)==null?void 0:N.style)==null?void 0:F.innerIconColor)||p,M=Ar(g,p,y);return U.marker(u,{icon:M})},[]),f=oe(()=>({General:["name","url",{key:"description",className:$.scrollableContent}]}),[]),c=C(({feature:m,layer:u,popupTabMapping:g,popupContainerProps:p,bottomMenu:y})=>{const M=u.getPopup();if(M){const S=U.DomUtil.create("div");Le(S).render(e(Nr,{feature:m,tabMapping:g,containerProps:p,bottomMenu:y})),M.setContent(S)}},[]),v=o||c,b=Object.assign({},r||f,n||{});return e(qe,{data:t,pointToLayer:s,onEachFeature:(m,u)=>{m.properties&&(m.properties.name&&u.bindTooltip(`${m.properties.name}`,{permanent:!1,direction:"auto"}),u.bindPopup("",{...a||{}}),u.on("popupopen",()=>{const g=e(W,{children:h==null?void 0:h.map((p,y)=>e(ge,{startIcon:p==null?void 0:p.startIcon,endIcon:p==null?void 0:p.endIcon,onClick:()=>{p.onClick(m)},children:p.label},y))});v({feature:m,layer:u,popupTabMapping:b,popupContainerProps:d,bottomMenu:g})}),i&&u.on("contextmenu",g=>{i({event:g,feature:m})}))}})},jr="_contextMenu_j0zss_1",Br="_contextMenuItem_j0zss_10",Ve={contextMenu:jr,contextMenuItem:Br},Ie=({...t})=>{const r=n=>{n.stopPropagation(),t.payload&&t.handler(t.payload),t.closeMenu&&t.closeMenu()};return e("div",{className:Ve.contextMenuItem,onClick:r,children:t.title})},Dr=({position:t,onClose:r,children:n,payload:o={}})=>{const[i,a]=x(!!t);D(()=>{a(!!t)},[t]);const d=()=>{a(!1),r==null||r()};return i?e("div",{className:Ve.contextMenu,style:{position:"absolute",left:t==null?void 0:t.x,top:t==null?void 0:t.y},children:T.Children.map(n,h=>T.cloneElement(h,{closeMenu:d,payload:o}))}):null},Tr=({...t})=>{const[r,n]=x(null),[o,i]=x(null),a=Ee({contextmenu:h=>{h.originalEvent.preventDefault(),d(h.latlng)},click:()=>{setTimeout(()=>{n(null)},100)}}),d=C(h=>{const{lat:s,lng:f}=h;i({lat:s,lng:f});const c=a.latLngToContainerPoint(h);n({x:c.x,y:c.y})},[a]);return D(()=>{t.latlng?d(t.latlng):(i(null),n(null))},[t.latlng,d]),e(W,{children:r&&e(Dr,{position:r,onClose:()=>n(null),payload:{coordinates:o},children:t.children})})},Gr=({...t})=>{const{addFeature:r}=le(ne),n=(a,d)=>{let h=d;if(!h){const s=prompt("Enter new name for feature");if(!s)return te.warn("Action cancelled"),null;const f=a.coordinates,c=gt();h={type:"Feature",properties:{id:c,name:s||`Location ${c}`},geometry:{type:"Point",coordinates:[f.lng,f.lat]}}}return te.success("Saved"),h},o=(a,d)=>{const h=n(a,d);h&&navigator.clipboard.writeText(JSON.stringify(h,null,2)).then(()=>{te.success("Copied feature to clipboard")}).catch(s=>{te.error(`Failed to copy feature to clipboard. ${s}`)})},i=(a,d)=>{const h=n(a,d);h&&r(P,h)};return t.menuLatLng?l(Tr,{latlng:t.menuLatLng,children:[e(Ie,{title:"Copy feature to clipboard",handler:a=>{o(a,t.selectedFeature)}}),e(Ie,{title:"Save feature to list",handler:a=>{i(a,t.selectedFeature)}})]}):null},Vr=({geoJsonOverlaySources:t,...r})=>{const{addFeature:n,savedFeatures:o}=le(ne),[i,a]=x(null),[d,h]=x(null),[s,f]=x(!1),[c,v]=x([]),[b,m]=x([]),u=oe(()=>Object.keys(t),[t]),g=pr(u),p=be(),y=K(p.breakpoints.down("sm")),M=K(p.breakpoints.between("sm","md")),S=K(p.breakpoints.between("md","lg")),[L,H]=x({}),[j,N]=x({});D(()=>{const E=S?600:M?450:y?275:900,R=S?450:M?400:y?350:500;H({minWidth:E,maxWidth:E,maxHeight:R,autoPanPadding:S?U.point(100,300):M?U.point(10,420):y?U.point(50,100):U.point(160,500)}),N({height:R})},[y,M,S,H,N]);const F=C(E=>{U.DomEvent.stopPropagation(E),E.originalEvent.preventDefault(),a(E.latlng),h(null)},[]),q=C(({event:E,feature:R})=>{U.DomEvent.stopPropagation(E),a(E.latlng),h(R)},[]),ce=C(E=>{n(P,E),te.success("Saved")},[n]);return D(()=>{!g.loading&&!g.error&&v(Object.entries(t).map(([E,R])=>{var we;const Q=g[E];return{name:(we=Q==null?void 0:Q.properties)==null?void 0:we.style.layerName,children:e(ke,{data:Q,popupTabMapping:R,contextMenuHandler:q,popupProps:L,popupContainerProps:j,popupActionButtons:[{label:"Save",startIcon:e(xt,{}),onClick:ce}]})}}))},[t,g,q,L,j,ce]),D(()=>{m(Object.entries(o).map(([E,R])=>({name:`- ${E}`,children:e(ke,{data:{type:"FeatureCollection",features:R,properties:{}},contextMenuHandler:q,popupProps:L,popupTabMappingExtra:{Notes:[{key:"tripNotes",className:$.scrollableContent,isHtml:!0}]},popupContainerProps:j},Date.now())})))},[o,q,L,j]),l(W,{children:[e($t,{overlays:[...c,...b],contextMenuHandler:F,...r,children:e(Gr,{selectedFeature:d,menuLatLng:i})}),e(hr,{drawerOpen:s,onClose:()=>f(!s)})]})},Wr=()=>{const t=oe(()=>({lat:-31.953512,lng:115.857048}),[]),r=oe(()=>({"./markers/westernAustralia/gas_stations_openstreetmap.json":{General:["name","brand","operator","opening_hours"]},"./markers/westernAustralia/gas_stations_fuelwatch.json":{General:["name","brandName","manned","operates247"]},"./markers/westernAustralia/gas_stations_bp.json":{General:["name","address",{key:"facilities",className:$.scrollableContent}],"More Info":[{key:"products",className:$.scrollableContent},"website","telephone"]},"./markers/westernAustralia/national_parks_simplified.json":{General:["name","url",{key:"description",className:$.scrollableContent}]},"./markers/westernAustralia/accommodation_WA.json":{General:["name","website","tarif","isBookable"],"More Info":["operatorName","GroupName","CheckInTime","CheckOutTime","email","address","hours"]},"./markers/westernAustralia/accommodation_campermate.json":{General:["name","fees","bookable",{key:"description",className:$.scrollableContent}],Score:["score","thumbs_up","thumbs_down"]},"./markers/westernAustralia/western_australia_tourism.json":{General:["name","url",{key:"description",className:$.scrollableContent}]},"./markers/westernAustralia/western_australia_visitor_centre.json":{General:["name","type",{key:"description",className:$.scrollableContent},{key:"pointOfDifference",className:$.scrollableContent}],Info:["address","hours","email","website"]},"./markers/westernAustralia/places.json":{General:["name"]}}),[]);return e(Vr,{center:t,geoJsonOverlaySources:r})};function Fr(){const[t,r]=x(!1);return D(()=>{localStorage.getItem("hasShownModal")||r(!0)},[]),l(W,{children:[e(Gt,{children:e(Wr,{})}),e(Te,{open:t,onClose:()=>{r(!1)}})]})}Le(document.getElementById("root")).render(l(T.StrictMode,{children:[e(Fr,{}),e(Fe,{})]}));
