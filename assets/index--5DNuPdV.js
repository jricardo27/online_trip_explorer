import{jsxs as l,jsx as e,Fragment as W}from"react/jsx-runtime";import T,{useState as x,useCallback as z,useEffect as j,useContext as se,useMemo as ae}from"react";import{createRoot as Ae}from"react-dom/client";import{toast as re,ToastContainer as Re}from"react-toastify";import{Box as G,Typography as w,List as te,ListItem as O,ListItemIcon as I,ListItemText as _,Link as U,ImageList as V,ImageListItem as k,ImageListItemBar as X,Dialog as $e,DialogTitle as Je,DialogContent as Ue,Tabs as Me,Tab as Y,Menu as Be,MenuItem as Z,IconButton as Ne,Collapse as Ze,Button as ye,Grid2 as ie,useTheme as ze,useMediaQuery as K,Drawer as Ke}from"@mui/material";import J from"leaflet";import{useMapEvents as je,useMap as xe,useMapEvent as Xe,MapContainer as Ye,LayersControl as me,TileLayer as qe,GeoJSON as Qe}from"react-leaflet";import{useDroppable as et,useSensors as tt,useSensor as Se,PointerSensor as rt,KeyboardSensor as nt,DndContext as ot,pointerWithin as it,DragOverlay as at}from"@dnd-kit/core";import{sortableKeyboardCoordinates as lt,arrayMove as De,useSortable as ct}from"@dnd-kit/sortable";import{Editor as st}from"@tinymce/tinymce-react";import{CSS as dt}from"@dnd-kit/utilities";import{Menu as ht}from"@mui/icons-material";import ue from"@mui/material/Button";import pt from"@mui/material/Fade";import ke from"@mui/material/Menu";import ee from"@mui/material/MenuItem";import de from"jszip";import Ce from"file-saver";import mt from"geojson-to-kml";import ut from"turndown";import gt from"axios";import{renderToString as _e}from"react-dom/server";import Ie from"react-image-gallery";import{v4 as ft}from"uuid";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var Te={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Le=T.createContext&&T.createContext(Te),vt=["attr","size","title"];function bt(t,r){if(t==null)return{};var n=yt(t,r),o,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)o=a[i],!(r.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(t,o)&&(n[o]=t[o])}return n}function yt(t,r){if(t==null)return{};var n={};for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){if(r.indexOf(o)>=0)continue;n[o]=t[o]}return n}function le(){return le=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},le.apply(this,arguments)}function Pe(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,o)}return n}function ce(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Pe(Object(n),!0).forEach(function(o){wt(t,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(n,o))})}return t}function wt(t,r,n){return r=Mt(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Mt(t){var r=zt(t,"string");return typeof r=="symbol"?r:r+""}function zt(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,r||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Ve(t){return t&&t.map((r,n)=>T.createElement(r.tag,ce({key:n},r.attr),Ve(r.child)))}function C(t){return r=>T.createElement(xt,le({attr:ce({},t.attr)},r),Ve(t.child))}function xt(t){var r=n=>{var{attr:o,size:i,title:a}=t,h=bt(t,vt),p=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),T.createElement("svg",le({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,h,{className:c,style:ce(ce({color:t.color||n.color},n.style),t.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),a&&T.createElement("title",null,a),t.children)};return Le!==void 0?T.createElement(Le.Consumer,null,n=>r(n)):r(Te)}function Ct(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 13c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm3 5.5h-2.5V21h-1v-2.5H15v-1h2.5V15h1v2.5H21v1z"},child:[]},{tag:"path",attr:{d:"M11.69 15c.36-.75.84-1.43 1.43-2H7v-2h11c1.07 0 2.09.25 3 .69V5c0-1.1-.9-2-2-2h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h6.69c-.44-.91-.69-1.93-.69-3 0-.34.03-.67.08-1H7v-2h4.69zM12 2.75c.41 0 .75.34.75.75s-.34.75-.75.75-.75-.34-.75-.75.34-.75.75-.75zM7 7h10v2H7V7z"},child:[]}]})(t)}function Ot(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"},child:[]}]})(t)}function St(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"},child:[]}]})(t)}function kt(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13 5.7V4h3l-1-1.49L16 1h-5v4.7L2 12v10h7v-5l3.03-2L15 17v5h7V12z"},child:[]}]})(t)}function _t(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 13c1.66 0 3-1.34 3-3S8.66 7 7 7s-3 1.34-3 3 1.34 3 3 3zm12-6h-8v7H3V5H1v15h2v-3h18v3h2v-9c0-2.21-1.79-4-4-4z"},child:[]}]})(t)}function It(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11 9H9V2H7v7H5V2H3v7c0 2.12 1.66 3.84 3.75 3.97V22h2.5v-9.03C11.34 12.84 13 11.12 13 9V2h-2v7zm5-3v8h2.5v8H21V2c-2.76 0-5 2.24-5 4z"},child:[]}]})(t)}function Lt(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"},child:[]}]})(t)}function Pt(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 23c-1.03 0-2.06-.25-3-.75-1.89 1-4.11 1-6 0-1.89 1-4.11 1-6 0-.95.5-1.97.75-3 .75H2v-2h1c1.04 0 2.08-.35 3-1 1.83 1.3 4.17 1.3 6 0 1.83 1.3 4.17 1.3 6 0 .91.65 1.96 1 3 1h1v2h-1zM12 5.5c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 12s-1.52.71-3.93 1.37c-.82-.23-1.53-.75-2.07-1.37-.73.84-1.8 1.5-3 1.5s-2.27-.66-3-1.5c-.73.84-1.8 1.5-3 1.5s-2.27-.66-3-1.5c-.54.61-1.25 1.13-2.07 1.37C1.52 18.21 0 17.5 0 17.5s2.93-1.36 7.13-2.08l1.35-4.17c.31-.95 1.32-1.47 2.27-1.16.09.03.19.07.27.11l2.47 1.3 2.84-1.5 1.65-3.71-.51-1.32L18.8 2 22 3.43 20.67 6.4l-1.31.5-3.72 8.34c4.85.63 8.36 2.26 8.36 2.26zm-8.98-4.54-1.52.8-1.75-.92-.71 2.17c.32 0 .64-.01.96-.01.71 0 1.4.03 2.07.08l.95-2.12z"},child:[]}]})(t)}function Et(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 11V5l-3-3-3 3v2H3v14h18V11h-6zm-8 8H5v-2h2v2zm0-4H5v-2h2v2zm0-4H5V9h2v2zm6 8h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V9h2v2zm0-4h-2V5h2v2zm6 12h-2v-2h2v2zm0-4h-2v-2h2v2z"},child:[]}]})(t)}function A(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03L22 9.24zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28L12 15.4z"},child:[]}]})(t)}function Ht(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M21 4H7V2H5v20h2v-8h14l-2-5 2-5zm-3.86 5.74.9 2.26H7V6h11.05l-.9 2.26-.3.74.29.74zM14 9c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"},child:[]}]})(t)}function At(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M17 12h2L12 2 5.05 12H7l-3.9 6h6.92v4h3.95v-4H21l-4-6zM6.79 16l3.9-6H8.88l3.13-4.5 3.15 4.5h-1.9l4 6H6.79z"},child:[]}]})(t)}function Bt(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm4 5.28c-1.23-.37-2.22-1.17-2.8-2.18l-1-1.6c-.41-.65-1.11-1-1.84-1-.78 0-1.59.5-1.78 1.44S7 23 7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3c1 1.15 2.41 2.01 4 2.34V23H19V9h-1.5v1.78zM7.43 13.13l-2.12-.41a.999.999 0 0 1-.79-1.17l.76-3.93a2 2 0 0 1 2.34-1.58l1.16.23-1.35 6.86z"},child:[]}]})(t)}const Nt=()=>l(G,{p:2,children:[e(w,{variant:"body1",children:"Trip Explorer is a simple application that enables users to select points of interest (POIs) from a curated list on a map and export them as a KML (Keyhole Markup Language) file."}),e(w,{variant:"body1",children:"This file can be imported into an offline map such as Organic Maps in case you are travelling to a remote area with no phone coverage."}),l(w,{variant:"body1",children:[e("br",{}),"In addition to selecting POIs, the application allows users to sort and categorize them, making it easy to plan trips in advance using each category as a daily itinerary."]}),l(w,{variant:"body1",children:[e("br",{}),"Selected POIs are saved locally, and the application does not require a frontend or backend server, running entirely in the user's browser.",e("br",{}),e("br",{})]}),e(w,{variant:"h6",children:"Technology"}),l(w,{variant:"body1",children:[e("br",{}),"Trip explorer is built using Typescript, React and Vite.",e("br",{}),"While the application can run on mobile devices, it is not yet optimized for mobile use."]}),l(w,{variant:"body1",children:[e("br",{}),"The map is powered by Leaflet and GeoJSON data is sourced from multiple providers, including:"]}),l(te,{children:[l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(_,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(U,{href:"https://www.openstreetmap.org/",target:"_blank",rel:"noopener noreferrer",children:"OpenStreetMap"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(_,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(U,{href:"https://campermate.com/",target:"_blank",rel:"noopener noreferrer",children:"Campermate"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(_,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(U,{href:"https://wikicamps.com.au/",target:"_blank",rel:"noopener noreferrer",children:"Wiki Camps"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(_,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(U,{href:"https://www.bp.com/en_au/australia/home/who-we-are/find-your-nearest-bp.html",target:"_blank",rel:"noopener noreferrer",children:"BP Australia"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(_,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(U,{href:"https://www.fuelwatch.wa.gov.au/",target:"_blank",rel:"noopener noreferrer",children:"Fuel Watch"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(_,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(U,{href:"https://exploreparks.dbca.wa.gov.au/",target:"_blank",rel:"noopener noreferrer",children:"Explore Parks WA"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(_,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(U,{href:"https://www.wavisitorcentre.com.au/",target:"_blank",rel:"noopener noreferrer",children:"Western Australia Visitor Centre"})})})]}),l(O,{sx:{paddingBottom:0},children:[e(I,{children:e(A,{})}),e(_,{sx:{margin:0},primary:e(w,{variant:"body1",children:e(U,{href:"https://www.westernaustralia.com/",target:"_blank",rel:"noopener noreferrer",children:"Western Australia website"})})})]})]})]}),jt=()=>l(G,{p:2,children:[e(w,{variant:"body1",children:"There are a number of features that could improve the experience using the app:"}),l(te,{children:[l(O,{children:[e(I,{children:e(A,{})}),e(_,{primary:"Calculate driving/walking distances between POIs"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(_,{primary:"Enable searching on curated information"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(_,{primary:"Allow searching for locations not in the curated information"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(_,{primary:"Allow to create projects to keep different sets of POIs"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(_,{primary:"Improve experience on mobile devices"})]})]}),l(w,{variant:"body1",children:["If you have any suggestions or feedback, please let me know by creating an issue using the"," ",e(U,{href:"https://github.com/jricardo27/trip_explorer/issues",target:"_blank",rel:"noopener",children:"issue tracker"})]})]}),Dt=()=>l(G,{p:2,children:[l(w,{variant:"body1",children:["This app was written as a hobby project, it's a frontend app running entirely on your browser.",e("br",{}),e("br",{}),"All the information is stored in your browser and nothing leaves it unless you decide to export the data.",e("br",{}),e("br",{}),"The following are technical details for anyone interested:"]}),l(te,{children:[l(O,{children:[e(I,{children:e(A,{})}),e(_,{primary:"Vite 6 as build tool"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(_,{primary:"React 18 as base library"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(_,{primary:"Typescript 5 as base language"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(_,{primary:"Material Design as UI framework"})]}),l(O,{children:[e(I,{children:e(A,{})}),e(_,{primary:"Leaftlet as map library"})]})]})]});function Tt(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 19m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v1a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z"},child:[]},{tag:"path",attr:{d:"M12 16c3.314 0 6 -4.686 6 -8a6 6 0 1 0 -12 0c0 3.314 2.686 8 6 8z"},child:[]},{tag:"path",attr:{d:"M12 9m-2 0a2 7 0 1 0 4 0a2 7 0 1 0 -4 0"},child:[]}]})(t)}function ge(t){return C({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0"},child:[]}]})(t)}const Vt=()=>l(G,{p:2,children:[e(w,{variant:"h6",children:"Base layer"}),e(w,{variant:"body1",children:"You can select the base layer to use for the map by opening the layer control on the top-right corner."}),l(V,{children:[e(k,{children:e("img",{src:"help/img/layer_control.webp",alt:"Layer control"})}),e(k,{children:e("img",{src:"help/img/layer_control_open.webp",alt:"Layer control opened"})})]}),l(w,{variant:"body1",children:[e("br",{}),"Current options are:"]}),l(V,{children:[l(k,{children:[e("img",{src:"docs/img/openstreetmap_layer.webp",alt:"OpenStreet Map"}),e(X,{position:"below",title:"OpenStreet Map"})]}),l(k,{children:[e("img",{src:"docs/img/cyclosm_layer.webp",alt:"CyclOSM (slow to load)"}),e(X,{position:"below",title:"CyclOSM (slow to load)"})]}),l(k,{children:[e("img",{src:"docs/img/esri_world_imagery_layer.webp",alt:"Esri World Imagery"}),e(X,{position:"below",title:"Esri World Imagery"})]}),l(k,{children:[e("img",{src:"docs/img/esri_world_street_map_layer.webp",alt:"Esri World Street Map"}),e(X,{position:"below",title:"Esri World Street Map"})]}),l(k,{children:[e("img",{src:"docs/img/esri_world_topographic_map_layer.webp",alt:"Esri World Topographic Map"}),e(X,{position:"below",title:"Esri World Topographic Map"})]})]}),e(w,{variant:"h6",children:"Points of Interest (POIs)"}),e(w,{variant:"body1",children:"On the same layer control on the top-right corner, there's a list of data sources you can choose from."}),l(V,{children:[e(k,{children:e("img",{src:"help/img/overlay_selector.webp",alt:"Overlay Selector"})}),e(k,{children:e("img",{src:"help/img/overlay_selector_with_selection.webp",alt:"Overlay Selector with selection"})})]}),l(w,{variant:"body1",children:[e("br",{}),"Available POIs sources vary depending on the destination. For example, if you are travelling to Western Australia, you can select from the following:"]}),l(V,{children:[l(k,{children:[e("img",{src:"docs/img/national_parks.webp",alt:"Western Australia National Parks"}),e(X,{title:"National Parks in Western Australia"})]}),l(k,{children:[e("img",{src:"help/img/campermate_pois.webp",alt:"Campermate POIs in Western Australia"}),e(X,{title:"Campermate POIs in Western Australia"})]})]}),e(w,{variant:"h6",children:"Saving Points of Interest (POIs)"}),e(w,{variant:"body1",children:"The main feature of the app is the ability to select points of interest (POIs) on the map and export them as a KML. It can be done by:"}),l(te,{children:[l(O,{children:[e(I,{children:e(ge,{})}),e(_,{primary:"Right clicking on any POI"})]}),l(O,{children:[e(I,{children:e(ge,{})}),e(_,{primary:"Right clicking on any point the map, a custom name can be assigned to the point."})]}),l(O,{children:[e(I,{children:e(ge,{})}),e(_,{primary:"On the POI's popup and using the Save button"})]})]}),l(V,{children:[e(k,{children:e("img",{src:"help/img/context_menu_on_map.webp",alt:"Context menu on map"})}),e(k,{children:e("img",{src:"help/img/save_poi_on_popup.webp",alt:"Save POI from popup"})})]}),e(w,{variant:"h6",children:"POIs Drawer"}),l(w,{variant:"body1",children:[e("br",{}),"The saved POIs can be accessed by opening the hamburger menu in the top-left corner of the map, next to the zoom controls."]}),l(V,{children:[e(k,{children:e("img",{src:"help/img/poi_list_hamburger.webp",alt:"POI saved list hamburger menu"})}),e(k,{children:e("img",{src:"help/img/poi_list_drawer.webp",alt:"POI saved list drawer"})})]}),l(w,{variant:"body1",children:[e("br",{}),"By default, only the"," ",e("strong",{children:"ALL"})," ","category is present, but users can add custom categories, such as"," ",e("strong",{children:"FIRST DAY"})," ","and"," ",e("strong",{children:"SECOND DAY"}),", by right-clicking on the left side of the drawer."]}),l(V,{children:[e(k,{children:e("img",{src:"help/img/category_list_context_menu.webp",alt:"Category list context menu"})}),e(k,{children:e("img",{src:"help/img/category_list_new.webp",alt:"Category list with new category"})})]}),l(w,{variant:"body1",children:[e("br",{}),e("br",{}),"Categories can be rearranged, deleted, or renamed, except for the *ALL* category."]}),e(V,{children:e(k,{children:e("img",{src:"help/img/category_list_second_context_menu.webp",alt:"Category list context menu for categories different from ALL"})})}),l(w,{variant:"body1",children:[e("br",{}),e("br",{}),"Clicking on a POI on the saved list will expand the POI's details. An editor can be toggled into view to append comments to the POI."]}),l(V,{children:[e(k,{children:e("img",{src:"help/img/selection_list_one_element_open.webp",alt:"POI details"})}),e(k,{children:e("img",{src:"help/img/selection_list_one_element_editor.webp",alt:"POI notes editor"})})]}),l(w,{variant:"body1",children:[e("br",{}),e("br",{}),"POI details can also be seen when opening the popup by clicking on the POI on the map. Note that on small screens the gallery will be shown as a tab."]}),l(V,{children:[e(k,{children:e("img",{src:"help/img/feature_general.webp",alt:"POI popup general tab"})}),e(k,{children:e("img",{src:"help/img/feature_more_info.webp",alt:"POI popup more info tab"})}),e(k,{children:e("img",{src:"help/img/feature_gallery.webp",alt:"POI popup gallery"})}),e(k,{children:e("img",{src:"help/img/feature_gallery_mobile.webp",alt:"POI popup gallery tab"})})]}),e(w,{variant:"h6",children:"Exporting"}),l(w,{variant:"body1",children:[e("br",{}),"Saved POIs can be exported as a GeoJSON or KML file, with a zip file automatically downloaded when the desired option is selected.",e("br",{}),e("br",{}),e("strong",{children:"Note:"}),"When exporting to KML, polygons are converted to MultiLineStrings due to a limitation in the Organic Maps app that does not support polygons, the converted MultiLineStrings are shown as tracks.",e("br",{}),e("br",{}),"Google Earth does not have this limitation, and in the future, it may be possible to select whether to export a KML including polygons or not."]}),e(V,{children:e(k,{children:e("img",{src:"help/img/export_menu.webp",alt:"Export Menu"})})})]}),Ge=({open:t,onClose:r})=>{const[n,o]=x(0);return l($e,{open:t,onClose:r,fullWidth:!0,maxWidth:"md",children:[e(Je,{children:"Welcome to Trip Explorer"}),l(Ue,{children:[e(G,{sx:{borderBottom:1,borderColor:"divider"},children:l(Me,{value:n,onChange:(a,h)=>{o(h)},variant:"fullWidth",children:[e(Y,{label:"About"}),e(Y,{label:"Tutorial"}),e(Y,{label:"What's Next"}),e(Y,{label:"Technical Stuff"})]})}),n===0&&e(Nt,{}),n===1&&e(Vt,{}),n===2&&e(jt,{}),n===3&&e(Dt,{})]})]})},D=(t,r)=>{var n;return`${t}=${(n=r.properties)==null?void 0:n.id}`},ne=t=>t?D(t.index,t.feature):"",P="all",oe=T.createContext(void 0),fe="savedFeatures",Gt=({children:t})=>{const[r,n]=x(()=>{const s=localStorage.getItem(fe);return s?JSON.parse(s):{all:[]}}),o=z(()=>{localStorage.setItem(fe,JSON.stringify(r))},[r]),i=z(()=>{const s=localStorage.getItem(fe);s&&n(JSON.parse(s))},[]);j(()=>{o()},[r,o]);const a=z(s=>{n(typeof s=="function"?b=>s(b):s)},[n]),h=z((s,b)=>{b&&a(f=>{const d=[...f[s]||[],b];return s===P?{...f,[s]:d}:{...f,[s]:d,[P]:f[P].filter(m=>{var v,u;return((v=m.properties)==null?void 0:v.id)!==((u=b.properties)==null?void 0:u.id)})}})},[a]),p=z((s,b)=>{if(!b){console.error("No selection info when trying to remove feature");return}a(f=>{const d=(f[s]||[]).filter((m,v)=>D(v,m)!==ne(b));return{...f,[s]:d}})},[a]),c=z((s,b)=>{a(f=>{const d={...f};for(const m in d)d[m]=d[m].map(v=>{var u,y;return((u=v.properties)==null?void 0:u.id)===((y=s.properties)==null?void 0:y.id)?b:v});return d})},[a]),g={savedFeatures:r,addFeature:h,removeFeature:p,updateFeature:c,setSavedFeatures:a,saveToLocalStorage:o,loadFromLocalStorage:i};return e(oe.Provider,{value:g,children:t})},Wt={osm:{name:"OpenStreetMap",maxZoom:19,url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},CyclOSM:{name:"CyclOSM",maxZoom:20,url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors. Tiles courtesy of <a href="https://www.openstreetmap.fr" target="_blank">OpenStreetMap France</a>'},esriWorldImagery:{name:"Esri World Imagery",maxZoom:19,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},esriWorldStreetMap:{name:"Esri World Street Map",maxZoom:19,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},esriWorldTopoMap:{name:"Esri World Topographic Map",maxZoom:19,url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},Ft=({setOverlayVisibility:t,setActiveBaseLayer:r,contextMenuHandler:n})=>{const o=z(h=>{const p=h.name;t(c=>({...c,[p]:!0}))},[t]),i=z(h=>{const p=h.name;t(c=>({...c,[p]:!1}))},[t]),a=z(h=>{r(h.name)},[r]);return je({overlayadd:o,overlayremove:i,baselayerchange:a,contextmenu:n}),null},Rt=()=>{const t=xe();return Xe("moveend",()=>{const r=t.getCenter(),n=t.getZoom(),o={center:[r.lat,r.lng],zoom:n};localStorage.setItem("mapState",JSON.stringify(o))}),null},$t=({center:t,zoom:r})=>{const n=xe();return j(()=>{t&&r&&n.setView(t,r)},[t,r,n]),null};function Jt(){const t=xe(),[r,n]=x(t.getZoom()),o={background:"white",bottom:"10px",color:"black",left:"10px",padding:"5px",position:"absolute",zIndex:400};return j(()=>{const i=()=>{n(t.getZoom())};return t.on("zoomend",i),()=>{t.off("zoomend",i)}},[t]),l("div",{style:o,children:["Zoom: ",r]})}const Ut=({children:t,center:r,overlays:n,contextMenuHandler:o})=>{const[i,a]=x({center:r,zoom:13}),[h,p]=x(()=>{const d=localStorage.getItem("overlayVisibility");return d?JSON.parse(d):{}}),[c,g]=x(()=>localStorage.getItem("activeBaseLayer")??"Esri World Street Map"),s=z(()=>{const d=localStorage.getItem("mapState");d&&a(JSON.parse(d))},[]);j(()=>{s()},[s]);const b=z(d=>{p(d)},[]),f=z(d=>{g(d)},[]);return j(()=>{localStorage.setItem("overlayVisibility",JSON.stringify(h))},[h]),j(()=>{localStorage.setItem("activeBaseLayer",c)},[c]),e(W,{children:l(Ye,{center:i.center,zoom:i.zoom,scrollWheelZoom:!0,style:{height:"100vh",width:"100%"},children:[e(Ft,{setOverlayVisibility:b,setActiveBaseLayer:f,contextMenuHandler:o}),e(Rt,{}),e($t,{center:i.center,zoom:i.zoom}),e(Jt,{}),l(me,{position:"topright",children:[Object.entries(Wt).map(([d,m])=>e(me.BaseLayer,{name:m.name,checked:c===m.name,children:e(qe,{attribution:m.attribution,url:m.url,maxZoom:m.maxZoom||20})},d)),n&&n.map(d=>e(me.Overlay,{name:d.name,checked:h[d.name]!==void 0?h[d.name]:d.checked!==void 0?d.checked:!1,children:d.children},d.name))]}),t]})})},Zt=({tab:t,onContextMenu:r,value:n,...o})=>{const{setNodeRef:i,node:a}=et({id:t,data:{category:t,type:"tab"}});return e(Y,{ref:i,label:t,value:n,onContextMenu:r,sx:{border:a!=null&&a.rect?"1px dashed #ccc":"none"},...o})},we="--NULL-TAB--",Kt=({tabs:t,selectedTab:r,handleTabChange:n,handleTabContextMenu:o})=>e(Me,{orientation:"vertical",variant:"scrollable",value:r,onChange:n,onContextMenu:i=>o(i,we),"aria-label":"Saved Features Tabs",sx:{height:"100%"},children:t.map(i=>e(Zt,{tab:i,value:i,onContextMenu:a=>o(a,i)},i))}),Xt=({contextMenu:t,contextMenuTab:r,handleClose:n,moveCategory:o,handleRenameCategory:i,handleAddCategory:a,handleRemoveCategory:h})=>{const p=z(()=>{if(!r||r===we)return;const s=prompt("Enter new name for category",r);s&&s!==r&&i(s)},[r,i]),c=s=>b=>{s(b),n()},g=s=>{s.preventDefault(),n()};return r?l(Be,{open:t!==null,onClose:n,onContextMenu:g,anchorReference:"anchorPosition",anchorPosition:t!==null?{top:t.mouseY,left:t.mouseX}:void 0,children:[r&&r!==P&&r!==we?l(W,{children:[e(Z,{onClick:c(()=>o("up")),children:"Move Up"},"move-up"),e(Z,{onClick:c(()=>o("down")),children:"Move Down"},"move-down"),e(Z,{onClick:c(p),children:"Rename Category"},"rename"),e(Z,{onClick:c(h),children:"Remove Category"},"remove")]}):null,e(Z,{onClick:c(a),children:"Add New Category"},"add-new")]}):e(W,{})},Yt=({contextMenu:t,contextMenuFeature:r,handleClose:n,handleDuplicate:o,handleRemoveFromList:i,handleRemoveCompletely:a})=>{if(!r)return e(W,{});const h=c=>g=>{c(g),n()};return e(Be,{open:t!==null,onClose:n,onContextMenu:c=>{c.preventDefault(),n()},anchorReference:"anchorPosition",anchorPosition:t!==null?{top:t.mouseY,left:t.mouseX}:void 0,children:r&&l(W,{children:[e(Z,{onClick:h(o),children:"Duplicate"}),r.category!=P&&e(Z,{onClick:h(i),children:"Remove from this list"}),e(Z,{onClick:h(a),children:"Remove"})]})})},qt=({children:t,savedFeatures:r,selectedTab:n,setSavedFeatures:o})=>{var s,b;const[i,a]=x(null),h=tt(Se(rt),Se(nt,{coordinateGetter:lt})),p=z(f=>{a(f.active.id.toString())},[]),c=z(f=>{var v,u;const{active:d,over:m}=f;if(m&&d.id!==m.id){const y=r[n].find((M,S)=>D(S,M)===d.id);if(y){const M=n;let S=n;if(((u=(v=m.data)==null?void 0:v.current)==null?void 0:u.type)==="tab"&&(S=m.id.toString()),M!==S)o(L=>{const E={...L};return E[M]=E[M].filter((N,B)=>D(B,N)!==d.id),E[S]=[...E[S],y],E});else{const L=r[M].findIndex((B,F)=>D(F,B)===d.id),E=r[M].findIndex((B,F)=>D(F,B)===m.id),N=De(r[M],L,E);o(B=>({...B,[M]:N}))}}}a(null)},[r,n,o]),g=z(()=>{a(null)},[]);return l(ot,{sensors:h,collisionDetection:it,onDragStart:p,onDragEnd:c,onDragCancel:g,children:[t,e(at,{children:i?e(O,{children:e(_,{primary:((b=(s=r[n].find((f,d)=>D(d,f)===i))==null?void 0:s.properties)==null?void 0:b.name)||"Unnamed Feature"})}):null})]})},Qt={"tinymce-editor":"_tinymce-editor_10zer_1"},er=({initialText:t,onChange:r})=>{const[n,o]=x(t),i=a=>{typeof a=="string"&&(o(a),r(a))};return e("div",{className:Qt["tinymce-editor"],children:e(st,{onChange:i,init:{height:400,width:"100%",menubar:!1,plugins:["lists","advlist","fullscreen","autolink","charmap","code","image","link","table"],toolbar:["undo redo bold italic backcolor image charmap link | advlist bullist numlist outdent indent table | code  fullscreen"],skin_url:"./tinymce/skins/ui/oxide"},value:n,onEditorChange:i,licenseKey:"gpl"})})},tr=({feature:t,id:r,index:n,selectedTab:o,selectedFeature:i,setSelectedFeature:a,handleContextMenu:h})=>{var u;const{attributes:p,listeners:c,setNodeRef:g,transform:s,transition:b,isDragging:f}=ct({id:r}),d={transform:dt.Transform.toString(s),transition:b,opacity:f?.5:1,border:f?"dashed":""},m=ne(i)===D(n,t),v={feature:t,index:n,category:o};return l(O,{ref:g,style:d,onClick:y=>{y.stopPropagation(),a(m?null:v)},onContextMenu:y=>{h(y,v),y.stopPropagation()},button:"true",children:[e(I,{children:e(Ne,{edge:"start","aria-label":"drag",...c,...p,sx:{cursor:"grab","&:active":{cursor:"grabbing"}},children:e(Ot,{})})}),e(_,{primary:((u=t.properties)==null?void 0:u.name)||"Unnamed Feature"})]})},rr=({features:t,setSavedFeatures:r,selectedTab:n,selectedFeature:o,setSelectedFeature:i,handleContextMenu:a,excludedProperties:h})=>{const[p,c]=x(!1),[g,s]=x(""),b=m=>{var v;p?(c(!1),s("")):(s(((v=m.properties)==null?void 0:v.tripNotes)||""),c(!0))},f=m=>{s(m)},d=()=>{o&&r(m=>{const v=[...m[n]],u=v.findIndex((y,M)=>D(M,y)===ne(o));return u!==-1&&v[u].properties&&(v[u].properties.tripNotes=g),{...m,[n]:v}})};return j(()=>{!o&&p&&(c(!1),s(""))},[p,o,s,c]),e(te,{children:t.map((m,v)=>l(T.Fragment,{children:[e(tr,{feature:m,id:D(v,m),index:v,selectedTab:n,selectedFeature:o,setSelectedFeature:i,handleContextMenu:a}),l(Ze,{in:ne(o)===D(v,m),timeout:"auto",unmountOnExit:!0,children:[e(O,{sx:{pl:4},children:e(ye,{onClick:()=>b(m),children:"Add/edit notes"})}),p&&l(W,{children:[e(O,{sx:{pl:4},children:e(er,{initialText:g,onChange:f},D(v,m))}),e(O,{sx:{pl:4},children:e(ye,{onClick:d,children:"Save notes"})})]}),e(te,{component:"div",disablePadding:!0,children:Object.entries(m.properties||{}).filter(([u])=>!h.includes(u)).map(([u,y])=>e(O,{sx:{pl:4},children:e(_,{primary:`${u}: ${y}`})},u))})]})]},D(v,m)))})},nr=(t,r,n,o)=>{const i=z(c=>{if(!o||o===P)return;const g=Object.keys(n),s=g.indexOf(o);if(s===-1)return;let b;if(c==="up"&&s>1)b=s-1;else if(c==="down"&&s<g.length-1)b=s+1;else return;const f=De(g,s,b),d=Object.fromEntries(f.map(m=>[m,n[m]]));t(d)},[o,n,t]),a=z(c=>{o&&o!==P&&c!==P&&t(g=>{const s={...g};s[c]=s[o],delete s[o];const b=Object.keys(s),f=b.indexOf(o);return f!==-1&&b.splice(f,1,c),Object.fromEntries(b.map(d=>[d,s[d]]))})},[o,t]),h=z(()=>{let c=prompt("Enter name for category");(!c||Object.keys(n).includes(c))&&(c=`Category_${Object.keys(n).length}`),t(g=>({...g,[c]:[]}))},[n,t]),p=z(()=>{if(o&&o!==P){t(b=>{const f=b[o],d={...b};return delete d[o],d[P]=[...d[P],...f],d});const c=Object.keys(n),g=c.indexOf(o),s=c[g-1];r(s)}},[o,t,r,n]);return{moveCategory:i,handleRenameCategory:a,handleAddCategory:h,handleRemoveCategory:p}},or=()=>{const[t,r]=x(null),[n,o]=x(null),[i,a]=x(null),h=z((g,s,b)=>{g.preventDefault(),g.stopPropagation(),r({mouseX:g.clientX+2,mouseY:g.clientY-6}),a(s||null),o(b||null)},[]),p=z((g,s)=>{h(g,void 0,s)},[h]),c=z(()=>{r(null),o(null),a(null)},[]);return{contextMenu:t,contextMenuTab:n,contextMenuFeature:i,handleContextMenu:h,handleTabContextMenu:p,handleClose:c}},ir=(t,r,n,o)=>{const i=z(()=>{n&&t(p=>({...p,[r]:[...p[r],n.feature]}))},[n,r,t]),a=z(()=>{n&&r!==P&&(o(r,n),t(p=>({...p,[P]:[...p[P],n.feature]})))},[n,r,o,t]),h=z(()=>{n&&(o(r,n),t(p=>({...p,[P]:p[P].filter((c,g)=>D(g,c)!==ne(n))})))},[n,r,o,t]);return{handleDuplicate:i,handleRemoveFromList:a,handleRemoveCompletely:h}},ar=()=>{const[t,r]=x(null),n=z(o=>{r(i=>i===o?null:o)},[]);return{selectedFeature:t,setSelectedFeature:n}},lr=async(t,r,n)=>{var o;try{const i=(o=t.name.split(".").pop())==null?void 0:o.toLowerCase();if(i==="zip"){const h=await new de().loadAsync(t),p=Object.values(h.files).find(c=>c.name.endsWith(".json"));if(p){const c=await p.async("string"),g=JSON.parse(c);r==="override"?n(g):r==="append"?n(s=>Object.assign({},s,g)):r==="merge"&&n(s=>{const b={...s};for(const f in g)b[f]?b[f]=[...new Set([...b[f],...g[f]])]:b[f]=g[f];return b})}}else i==="geojson"&&console.log("Not supported yet")}catch(i){console.error(i)}},ve=(t,r)=>{const n=document.createElement("input");n.type="file",n.accept=".zip",n.onchange=o=>{const i=o.target;i.files&&i.files.length>0&&lr(i.files[0],t,r)},n.click()},cr=async t=>{const r=new de;r.file("trip_explorer_backup.json",JSON.stringify(t,null,2));const n=await r.generateAsync({type:"blob"});Ce.saveAs(n,"trip_explorer_backup.zip")},sr=t=>{const r=new de;Object.entries(t).map(([n,o])=>{const i={type:"FeatureCollection",features:o};r.file(`${n}.geojson`,JSON.stringify(i))}),r.generateAsync({type:"blob"}).then(n=>{Ce.saveAs(n,"trip_explorer_features.zip")})},dr=t=>{var n,o,i,a,h;const r={...t};if(r.properties||(r.properties={}),(n=t.properties)!=null&&n.tripNotes){const c=new ut().turndown(t.properties.tripNotes);c&&(r.properties.description=c+`

--------------------

`+r.properties.description)}return(o=r.properties)==null||delete o.id,(i=r.properties)==null||delete i.style,(a=r.properties)==null||delete a.images,(h=r.properties)==null||delete h.tripNotes,r},hr=t=>{if(t.geometry.type==="Polygon")return{...t,geometry:{type:"MultiLineString",coordinates:[t.geometry.coordinates[0]]}};if(t.geometry.type==="MultiPolygon"){const r=t.geometry.coordinates.map(n=>n[0]);return{...t,geometry:{type:"MultiLineString",coordinates:r}}}else return t},pr=t=>{const r=new de;Object.entries(t).map(([n,o])=>{const i={type:"FeatureCollection",features:o.map(h=>(h=dr(h),h=hr(h),h))},a=mt(i);r.file(`${n}.kml`,a)}),r.generateAsync({type:"blob"}).then(n=>{Ce.saveAs(n,"trip_explorer_features.zip")})},mr=()=>{const{savedFeatures:t,setSavedFeatures:r}=se(oe),[n,o]=x(null),[i,a]=x(!1),[h,p]=x(null),c=!!h,g=!!n,s=y=>{o(y.currentTarget)},b=()=>{o(null)},f=y=>{p(y.currentTarget)},d=()=>{p(null)},m=y=>M=>{y(M),b(),d()},v=()=>a(!0),u=()=>a(!1);return l(ie,{container:!0,spacing:3,sx:{flexGrow:1},children:[l(ie,{size:4,children:[e(ue,{id:"fade-button","aria-controls":g?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":g?"true":void 0,onClick:s,children:"Export"}),l(ke,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:n,open:g,onClose:b,TransitionComponent:pt,children:[e(ee,{onClick:m(()=>sr(t)),children:"To GeoJson"}),e(ee,{onClick:m(()=>pr(t)),children:"To KML"}),e(ee,{onClick:m(()=>cr(t)),children:"Export backup"})]})]}),l(ie,{size:4,children:[l(ue,{id:"import-button","aria-controls":c?"import-menu":void 0,"aria-haspopup":"true","aria-expanded":c?"true":void 0,onClick:f,children:["Import ",e(ht,{})]}),l(ke,{id:"import-menu",anchorEl:h,open:c,onClose:d,MenuListProps:{"aria-labelledby":"import-button"},children:[e(ee,{onClick:m(()=>{ve("override",r)}),children:"Override existing POIs"}),e(ee,{onClick:m(()=>{ve("append",r)}),children:"Append categories"}),e(ee,{onClick:m(()=>{ve("merge",r)}),children:"Merge Categories"})]})]}),l(ie,{size:{xs:3,sm:3,md:2,lg:2,xl:2},offset:"auto",children:[l(ue,{onClick:v,children:["Help ",e(St,{})]}),e(Ge,{open:i,onClose:u})]})]})},ur=["id","images","style"],gr=({drawerOpen:t,onClose:r,setCurrentCategory:n})=>{const[o,i]=x(P),{savedFeatures:a,setSavedFeatures:h,removeFeature:p}=se(oe),{selectedFeature:c,setSelectedFeature:g}=ar(),{contextMenu:s,contextMenuTab:b,contextMenuFeature:f,handleContextMenu:d,handleTabContextMenu:m,handleClose:v}=or(),{moveCategory:u,handleRenameCategory:y,handleAddCategory:M,handleRemoveCategory:S}=nr(h,i,a,b),{handleDuplicate:L,handleRemoveFromList:E,handleRemoveCompletely:N}=ir(h,o,f,p),B=ze(),F=K(B.breakpoints.down("sm")),q=K(B.breakpoints.between("sm","md")),H=K(B.breakpoints.between("md","lg"))?"70%":q?"50%":F?"92%":"50%",R=z((Q,pe)=>{i(pe),g(null)},[g]);return j(()=>{n&&n(o)},[o,n]),l(W,{children:[e(Ne,{onClick:r,style:{position:"absolute",top:10,left:40,zIndex:1e3},children:e(Lt,{})}),l(qt,{savedFeatures:a,selectedTab:o,setSavedFeatures:h,children:[l(Ke,{anchor:"left",open:t,onClose:r,sx:{width:H,flexShrink:0,"& .MuiDrawer-paper":{width:H,boxSizing:"border-box"}},children:[e(G,{sx:{display:"flex",height:"50px",border:"1px solid #ccc"},children:e(mr,{})}),l(G,{sx:{display:"flex",height:"100%"},children:[e(G,{sx:{width:150,bgcolor:"background.paper",borderRight:1,borderColor:"divider"},children:e(Kt,{tabs:Object.keys(a),selectedTab:o,handleTabChange:R,handleTabContextMenu:m})}),e(G,{sx:{flexGrow:1,overflowY:"auto"},children:e(rr,{features:a[o]||[],setSavedFeatures:h,selectedTab:o,selectedFeature:c,setSelectedFeature:g,handleContextMenu:d,excludedProperties:Array.from(ur)})})]})]}),e(Xt,{contextMenu:s,contextMenuTab:b,handleClose:v,moveCategory:u,handleRenameCategory:y,handleAddCategory:M,handleRemoveCategory:S}),e(Yt,{contextMenu:s,contextMenuFeature:f,handleClose:v,handleDuplicate:L,handleRemoveFromList:E,handleRemoveCompletely:N})]})]})};function We(t,r){const n={...t};return be(t)&&be(r)&&Object.keys(r).forEach(o=>{be(r[o])?o in t?n[o]=We(t[o],r[o]):Object.assign(n,{[o]:r[o]}):Object.assign(n,{[o]:r[o]})}),n}function be(t){return t&&typeof t=="object"&&!Array.isArray(t)}const fr=t=>{const[r,n]=x({}),[o,i]=x(!0),[a,h]=x(null);return j(()=>{(async()=>{i(!0);try{const c={},s=t.map(async d=>{const m=await gt.get(d,c);return[d,m.data]}),f=(await Promise.all(s)).reduce((d,[m,v])=>{const u=v.properties||{};return v.features.forEach(y=>{if(y.type!=="Feature"){console.warn("Skipping non-feature item in features array");return}y.properties={...u,...y.properties},Object.keys(u).forEach(M=>{var S;if(typeof u[M]=="object"&&u[M]!==null){const L=(S=y.properties)==null?void 0:S[M];typeof L=="object"&&L!==null?y.properties[M]=We(u[M],L):y.properties[M]=u[M]}})}),d[m]=v,d},{});n(f)}catch(c){c instanceof Error&&h(c.message)}finally{i(!1)}})()},[t]),o?{...r,loading:!0}:a?(console.error(a),{...r,error:a}):r},vr="_scrollableContent_z5154_1",br="_tabsContainer_z5154_10",$={scrollableContent:vr,tabsContainer:br};function yr(t){return C({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M2.52 3.515A2.5 2.5 0 0 1 4.82 2h6.362c1 0 1.904.596 2.298 1.515l.792 1.848c.075.175.21.319.38.404.5.25.855.715.965 1.262l.335 1.679q.05.242.049.49v.413c0 .814-.39 1.543-1 1.997V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.338c-1.292.048-2.745.088-4 .088s-2.708-.04-4-.088V13.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-1.892c-.61-.454-1-1.183-1-1.997v-.413a2.5 2.5 0 0 1 .049-.49l.335-1.68c.11-.546.465-1.012.964-1.261a.8.8 0 0 0 .381-.404l.792-1.848ZM3 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2m10 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6 8a1 1 0 0 0 0 2h4a1 1 0 1 0 0-2zM2.906 5.189a.51.51 0 0 0 .497.731c.91-.073 3.35-.17 4.597-.17s3.688.097 4.597.17a.51.51 0 0 0 .497-.731l-.956-1.913A.5.5 0 0 0 11.691 3H4.309a.5.5 0 0 0-.447.276L2.906 5.19Z"},child:[]}]})(t)}function wr(t){return C({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 3a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 3m8 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5m-13.5.5a.5.5 0 0 0 0-1h-2a.5.5 0 0 0 0 1zm11.157-6.157a.5.5 0 0 1 0 .707l-1.414 1.414a.5.5 0 1 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m-9.9 2.121a.5.5 0 0 0 .707-.707L3.05 5.343a.5.5 0 1 0-.707.707zM8 7a4 4 0 0 0-4 4 .5.5 0 0 0 .5.5h7a.5.5 0 0 0 .5-.5 4 4 0 0 0-4-4m0 1a3 3 0 0 1 2.959 2.5H5.04A3 3 0 0 1 8 8"},child:[]}]})(t)}function Mr(t){return C({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v5a.5.5 0 0 1-.5.5h-5a.5.5 0 0 1-.5-.5z"},child:[]},{tag:"path",attr:{d:"M1 2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v8a2 2 0 0 1 2 2v.5a.5.5 0 0 0 1 0V8h-.5a.5.5 0 0 1-.5-.5V4.375a.5.5 0 0 1 .5-.5h1.495c-.011-.476-.053-.894-.201-1.222a.97.97 0 0 0-.394-.458c-.184-.11-.464-.195-.9-.195a.5.5 0 0 1 0-1q.846-.002 1.412.336c.383.228.634.551.794.907.295.655.294 1.465.294 2.081v3.175a.5.5 0 0 1-.5.501H15v4.5a1.5 1.5 0 0 1-3 0V12a1 1 0 0 0-1-1v4h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1zm9 0a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v13h8z"},child:[]}]})(t)}function zr(t){return C({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M7.293 1.5a1 1 0 0 1 1.414 0L11 3.793V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v3.293l2.354 2.353a.5.5 0 0 1-.708.708L8 2.207l-5 5V13.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 2 13.5V8.207l-.646.647a.5.5 0 1 1-.708-.708z"},child:[]},{tag:"path",attr:{d:"M16 12.5a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0m-3.5-2a.5.5 0 0 0-.5.5v1.5a.5.5 0 1 0 1 0V11a.5.5 0 0 0-.5-.5m0 4a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"},child:[]}]})(t)}function xr(t){return C({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"},child:[]},{tag:"path",attr:{d:"M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z"},child:[]}]})(t)}function Cr(t){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 448h-24.68L359.54 117.75l53.41-73.55c5.19-7.15 3.61-17.16-3.54-22.35l-25.9-18.79c-7.15-5.19-17.15-3.61-22.35 3.55L320 63.3 278.83 6.6c-5.19-7.15-15.2-8.74-22.35-3.55l-25.88 18.8c-7.15 5.19-8.74 15.2-3.54 22.35l53.41 73.55L40.68 448H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h608c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM320 288l116.36 160H203.64L320 288z"},child:[]}]})(t)}function Or(t){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M616 192H480V24c0-13.26-10.74-24-24-24H312c-13.26 0-24 10.74-24 24v72h-64V16c0-8.84-7.16-16-16-16h-16c-8.84 0-16 7.16-16 16v80h-64V16c0-8.84-7.16-16-16-16H80c-8.84 0-16 7.16-16 16v80H24c-13.26 0-24 10.74-24 24v360c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V216c0-13.26-10.75-24-24-24zM128 404c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12H76c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm128 192c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm160 96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12V76c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm160 288c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40zm0-96c0 6.63-5.37 12-12 12h-40c-6.63 0-12-5.37-12-12v-40c0-6.63 5.37-12 12-12h40c6.63 0 12 5.37 12 12v40z"},child:[]}]})(t)}function Sr(t){return C({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0z"},child:[]}]})(t)}function kr(t){return C({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M206.86 245.15c-35.88 10.45-59.95 41.2-57.53 74.1 11.4-12.72 28.81-23.7 49.9-30.92l7.63-43.18zM95.81 295L64.08 115.49c-.29-1.62.28-2.62.24-2.65 57.76-32.06 123.12-49.01 189.01-49.01 1.61 0 3.23.17 4.85.19 13.95-13.47 31.73-22.83 51.59-26 18.89-3.02 38.05-4.55 57.18-5.32-9.99-13.95-24.48-24.23-41.77-27C301.27 1.89 277.24 0 253.32 0 176.66 0 101.02 19.42 33.2 57.06 9.03 70.48-3.92 98.48 1.05 126.58l31.73 179.51c14.23 80.52 136.33 142.08 204.45 142.08 3.59 0 6.75-.46 10.01-.8-13.52-17.08-28.94-40.48-39.5-67.58-47.61-12.98-106.06-51.62-111.93-84.79zm97.55-137.46c-.73-4.12-2.23-7.87-4.07-11.4-8.25 8.91-20.67 15.75-35.32 18.32-14.65 2.58-28.67.4-39.48-5.17-.52 3.94-.64 7.98.09 12.1 3.84 21.7 24.58 36.19 46.34 32.37 21.75-3.82 36.28-24.52 32.44-46.22zM606.8 120.9c-88.98-49.38-191.43-67.41-291.98-51.35-27.31 4.36-49.08 26.26-54.04 54.36l-31.73 179.51c-15.39 87.05 95.28 196.27 158.31 207.35 63.03 11.09 204.47-53.79 219.86-140.84l31.73-179.51c4.97-28.11-7.98-56.11-32.15-69.52zm-273.24 96.8c3.84-21.7 24.58-36.19 46.34-32.36 21.76 3.83 36.28 24.52 32.45 46.22-.73 4.12-2.23 7.87-4.07 11.4-8.25-8.91-20.67-15.75-35.32-18.32-14.65-2.58-28.67-.4-39.48 5.17-.53-3.95-.65-7.99.08-12.11zm70.47 198.76c-55.68-9.79-93.52-59.27-89.04-112.9 20.6 25.54 56.21 46.17 99.49 53.78 43.28 7.61 83.82.37 111.93-16.6-14.18 51.94-66.71 85.51-122.38 75.72zm130.3-151.34c-8.25-8.91-20.68-15.75-35.33-18.32-14.65-2.58-28.67-.4-39.48 5.17-.52-3.94-.64-7.98.09-12.1 3.84-21.7 24.58-36.19 46.34-32.37 21.75 3.83 36.28 24.52 32.45 46.22-.73 4.13-2.23 7.88-4.07 11.4z"},child:[]}]})(t)}function _r(t){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.31 72.57L439.43 4.69c-6.25-6.25-16.38-6.25-22.63 0l-22.63 22.63c-6.25 6.25-6.25 16.38 0 22.63l-76.67 76.67c-46.58-19.7-102.4-10.73-140.37 27.23L18.75 312.23c-24.99 24.99-24.99 65.52 0 90.51l90.51 90.51c24.99 24.99 65.52 24.99 90.51 0l158.39-158.39c37.96-37.96 46.93-93.79 27.23-140.37l76.67-76.67c6.25 6.25 16.38 6.25 22.63 0l22.63-22.63c6.24-6.24 6.24-16.37-.01-22.62zM179.22 423.29l-90.51-90.51 122.04-122.04 90.51 90.51-122.04 122.04z"},child:[]}]})(t)}function Ir(t){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M25 41v446h30V41zm56.8 40.15c-.1 14.49 1.03 25.35 3.31 32.75 2.77 8.9 6.33 12.9 12.45 16 11.34 5.7 35.34 5.3 70.54 5.1.8-8.5-.5-15.1-3.2-20.4-3.5-6.8-9.4-12.2-18.1-16.86-15.4-8.19-39.1-12.83-65-16.59zM457 105v382h30V105zM73 153v46h238v-46zm256 0v46h110v-46zm-18 64v158h18v-46h110v-18H329v-46h110v-18H329v-30zM81.79 321.3c-.1 14.4 1.03 25.3 3.3 32.6 2.78 9 6.33 13 12.46 16 11.35 5.7 35.35 5.3 70.55 5.1.8-8.5-.5-15-3.2-20.3-3.4-6.8-9.4-12.2-18.1-16.8-15.4-8.2-39.1-12.8-65.01-16.6zM73 393v46h238v-46zm256 0v46h110v-46z"},child:[]}]})(t)}function Lr(t){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M47 145c-10 0-23 12.4-23 24.9v134.3l52.49 7.5C84.97 297 100.9 287 119 287c21 0 39 13.3 45.9 32h188.2c6.9-18.7 24.9-32 45.9-32s39 13.3 45.9 32H488v-77.2L456.5 145zm-9 14h405.6l25.6 82H296v64h-98v-64H38zm18 18v46h62v-46zm80 0v46h62v-46zm80 0v110h22V177zm40 0v110h22V177zm40 0v46h62v-46zm86.6 0v46h62.2l-14.4-46zM119 305c-17.2 0-31 13.8-31 31s13.8 31 31 31 31-13.8 31-31-13.8-31-31-31zm280 0c-17.2 0-31 13.8-31 31s13.8 31 31 31 31-13.8 31-31-13.8-31-31-31zm-280 23a8 8 0 0 1 8 8 8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8zm280 0a8 8 0 0 1 8 8 8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8z"},child:[]}]})(t)}function Pr(t){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M247 80v53h-26v48h-34.027l-2.54 18.154-38.408-3.205-2.05 18.102 37.988 2.994-4.578 34.312-25.592 13.96 22.006 65.107a1658.637 1658.637 0 0 0-137.914 15.91l2.812 17.777a1639.075 1639.075 0 0 1 121.096-14.529l-.078.31c112.547 28.156 190.551 43.088 306.816-8.958l-7.355-16.43a485.085 485.085 0 0 1-26.844 11.092c-29.894-4.015-61.118-6.653-93.156-8.053l21.031-62.227-25.592-13.959L325.027 181H291v-48h-26V80h-18zm-8 71h34v30h-34v-30zm-35.973 48h103.946l6.16 40.639L256 211.748l-57.133 27.89 4.16-40.638zM256 232.252v94.346c-5.41.103-10.833.238-16.262.402h-46.46l-21.071-52.316L256 232.252zM298.17 254c8.836 0 16 7.163 16 16s-7.164 16-16 16c-8.837 0-16-7.163-16-16s7.163-16 16-16zm-56.92 91h82.404c22.502.709 44.618 2.01 66.149 3.96-58.924 14.561-109.381 9.793-169.532-3.194A1523.33 1523.33 0 0 1 241.25 345zm-132.865 29.363c-7.943-.023-15.667.234-23.084.842l1.469 17.941c54.39-4.455 133.014 12.49 189.199 17.202 55.64 4.665 109.966-1.684 168.654-13.512l-3.557-17.645c-57.8 11.65-110.279 17.692-163.591 13.221-47.153-3.954-113.49-17.885-169.09-18.049zm20.22 35.285c-12.198-.079-25.387.615-38.517 1.873-26.26 2.518-51.6 7.157-67.865 14.26l7.203 16.496c12.302-5.372 37.244-10.427 62.38-12.838 25.138-2.41 51.157-2.311 65.846.625 32.956 6.589 91.409 16.938 138.62 15.444l-.569-17.99c-44.053 1.394-102.073-8.619-134.523-15.106-9.17-1.833-20.376-2.684-32.575-2.764z"},child:[]}]})(t)}function Er(t){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M236.422 98.393c-126.642-1.276-206.07 46.77-212.058 83.93-2.977 41.18-4.165 83.628-4.016 124.617l4.31 3.796c3.963-15.315 6.47-31.843 14.122-44.085 1.3 27.18 5.068 58.562 11.369 82.067-2.477 24.988-2.118 47.99-3.436 72.978 21.158 12.726 60.485 10.65 67.541 1.986 2.936-20.695 4.981-42.58 3.973-68.535l7.592-35.355c6.418-14.587 25.29-17.243 23.406-31.799l17.828-2.467c.355 25.196-14.375 27.1-24.713 41.653 12.994 5.357 14.676 3.886 24.059 5.124 23.848 2.742 45.234 3.774 67.802-8.175l-3.101-17.541 17.723-3.135 3.064 17.328c4.22 14.097 11.996 104.392 18.559 108.361 13.411 6.417 53.823 6.417 55.472-5.312 1.647-45.786 3.861-90.1-5.07-133.242 3.702-4.1 7.34-8.112 10.928-12.096-20.178-10.157-44.214-25.838-57.62-41.797-9.037-17.21-13.75-38.688-17.304-56.256-2.546-12.943-4.3-26.074-3.81-37.486.244-5.706 1.003-11.018 2.982-15.938 19.848-20.186 56.606-35.68 79.58-46.503-33.273-7.269-71.55 7.386-99.182 17.882zm128.934-9.931c-29.757 10.977-72.215 22.174-92.633 45.267-.807 2.008-1.51 5.563-1.7 9.994-.38 8.863 1.097 21.093 3.487 33.243 2.39 12.15 5.644 24.32 8.53 33.642 1.442 4.662 2.797 8.624 3.865 11.44 15.216 22.215 45.646 39.625 67.966 44.959l14.495-28.713c-11.574-15.04-13.779-35.226-4.59-50.352 4.932-6.143 9.727-10.553 16.982-10.416 4.545.109 9.194 1.996 12.856 5.045 25.905 21.572 49.481 48.69 83.37 70.66-.136-6.626-.26-12.94-.243-18.761.026-9.03-18.924-97.759-50.614-139.553-22.918-5.83-40.343-9.14-61.771-6.455zm68.883 76.232c4.327-.07 8.421.563 11.857 2.319.061 4.922-.298 10.035-10.887 16.152-4.501-4.72-11.239-10.838-17.908-15.627 5.427-1.506 11.374-2.754 16.938-2.844zm-54.233 32.838c-2.263 3.593-3.912 11.657-2.703 17.531 1.402 6.812 9.062 16.901 21.55 26.47 12.49 9.567 29.242 18.77 46.753 26.087 15.609 6.522 31.748 11.435 46.058 14.19-49.78-25.118-79.482-61.19-108.566-85.409-1.548-1.595-2.387.034-3.092 1.131zm58.914 86.797c.526 23.427-2.416 50.265-17.086 59.894-11.128 7.306-33.235 1.34-38.41-10.925-3.657-8.667 15.567-15.677 13.408-24.832-1.718-7.287-11.033-14.374-18.375-12.912-17.881 3.558-34.905 28.836-29.3 46.185 10.14 31.387 62.177 51.105 91.875 36.75 27.49-13.288 35.058-46.714 36.808-81.19-12.704-3.13-25.983-7.579-38.92-12.97zm-200.681 52.52a129.415 129.415 0 0 1-9.993 4.34l-8.67 77.603c1.22 8.802 15.819 12.647 30.385 12.81zm-100.65 4.519c-1.341 10.733-2.367 21.785-3.073 30.953-1.545 20.225-2.483 41.562-2.496 51.49 18.869 11.927 54.798 4.533 53.105-2.005-.656-27.278-6.002-49.806-12.58-73.717-11.983-1.258-23.524-3.864-34.957-6.721z"},child:[]}]})(t)}function Hr(t){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M279.27 114.408l-2.297 9.184H87v18h185.473l-7.5 30h46.054l-7.5-30H489v-18H299.027l-2.297-9.184h-17.46zM26.623 173.592l14.62 87.724-12.757 38.276H44.27l32.548-32.547L197.94 284.35l2.11 4.216c7.196 14.39 18.094 25.306 28.942 32.538C239.84 328.334 251 331.592 256 331.592h128c23 0 46.04-3.978 62.346-11.225 8.152-3.623 14.546-8.035 18.63-12.703 1.744-1.993 3.066-3.993 4.034-6.072H314.066l-48-112H259l-64 48H74.437l-32-64H26.623zm259.025 16l40.286 94h44.418l-40.286-94h-44.418zm64.2.47l40.086 93.53h79.138c-7.773-34.538-24.96-56.882-47.127-71.49-20.674-13.625-46.067-20.328-72.097-22.04zm46.525 159.186c-4.108.223-8.24.344-12.373.344h-6.488l10 30h-87.024l10-30h-18.976l-10 30H199v18h251.967l24.02-17.764 7.236-5.35-10.703-14.474-7.237 5.35-19.25 14.238h-38.545l-10.115-30.344z"},child:[]}]})(t)}function Ar(t){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M424.188 85.594c.33.05-.86.094-3.313.094-18.512 0-35.78 20.06-35.78 47.5 0 13.83 4.712 26.208 11.624 34.78l10.217 12.626-16.062 2.47c-10.56 1.617-17.663 6.432-23.625 14.342s-10.344 19.18-13.25 32.344c-5.186 23.492-5.59 52.425-5.625 78.156h30.438l.593 8.72 7.094 106.593h65.813l8.03-106.69.657-8.624h32c-.24-25.383-1.62-53.933-7.344-77.25-3.213-13.086-7.783-24.354-13.687-32.375-5.905-8.02-12.7-12.85-22.064-14.593l-15.72-2.937 10.283-12.25c7.228-8.623 12.186-21.138 12.186-35.313 0-25.74-15.5-45.406-32.28-47.562l-.188-.03zm-244.75 3.375c-45.9.006-99.844 5.373-161.625 17.905V126c268.018-37.648 341.545 38.15 226.25 79.344-117.327 41.92-210.503 252.258 159.406 270.594 4.362.438 8.85.687 13.436.687 22.28 0 42.34-5.452 56.125-13.594 13.787-8.14 20.595-18.14 20.595-27.905s-6.808-19.764-20.594-27.906c-.23-.138-.482-.272-.717-.408l-2 26.47-.657 8.656H369l-.563-8.75-3.28-49.5c-128.194 2.8-163.256-100.51-80.094-130.47 20.385-7.344 37.086-15.836 50.187-25.03.17-.822.32-1.655.5-2.47 3.262-14.774 8.256-28.498 16.594-39.562 4.946-6.563 11.24-12.07 18.72-15.97-3.124-42.547-68.335-81.236-191.627-81.217z"},child:[]}]})(t)}function Br(t){return C({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M323.9 19.81l-55.2 55.15L285 91.24 272.2 104 256 87.73 19.81 323.9l45.57 45.6c28.5-14.6 56.22-11.7 72.52 4.6 16.3 16.3 19.2 44 4.6 72.5l45.6 45.6 236.1-236.1-16.2-16.3 12.8-12.8 16.3 16.2 55.1-55.1-45.6-45.6c-28.5 14.6-56.2 11.7-72.5-4.6-16.3-16.3-19.2-44.02-4.6-72.52zm-16.2 93.99l33.9 34-12.8 12.8-33.9-34zM256 130.2L381.8 256 222.1 415.8 96.16 289.9 249.6 136.5zm0 25.4L121.6 289.9l100.5 100.5L356.4 256zm108.2 14.8l34 33.9-12.8 12.8-34-33.9z"},child:[]}]})(t)}const Nr=t=>C({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"},child:[]}]})(t),jr={bs:{BsBrightnessAltHigh:wr,BsFillCarFrontFill:yr,BsFuelPump:Mr,BsHouseExclamation:zr,BsImage:xr},fa:{FaCampground:Cr,FaCity:Or,FaMapMarker:Sr,FaTheaterMasks:kr,FaWineBottle:_r},gi:{GiBunkBeds:Ir,GiBus:Lr,GiCruiser:Pr,GiElephant:Er,GiHelicopter:Hr,GiJourney:Ar,GiTicket:Br},md:{MdFestival:kt,MdHotel:_t,MdKayaking:Pt,MdLocationCity:Et,MdOutlineHiking:Bt,MdOutlinePark:At,MdOutlineTour:Ht,MdRestaurant:It},tb:{TbAirBalloon:Tt}},Dr=(t,r="grey",n="grey")=>{var h;const[o,i]=t.split("/"),a=(h=jr[o])==null?void 0:h[i];return a?J.divIcon({html:`
    <div style="position: relative;">
      ${_e(e(Nr,{size:32,color:r}))}
      <div style="position: absolute; top: 45%; left: 65%; transform: translate(-50%, -50%);">
        ${_e(e(a,{size:16,color:n}))}
      </div>
    </div>
  `,iconSize:[24,24],iconAnchor:[12,24],className:"custom-icon"}):(console.error(`Icon "${t}" not found in "${o}" set`),J.divIcon({html:"❓",className:"custom-icon"}))},Tr=({feature:t,tabMapping:r,containerProps:n,bottomMenu:o})=>{var b;const[i,a]=x(0),h=ze(),p=K(h.breakpoints.down("sm")),c=K(h.breakpoints.between("sm","md")),g=(f,d)=>{a(d)},s=(b=t.properties)!=null&&b.images?t.properties.images.map(f=>{const d=typeof f=="string"?f:f.src,m=typeof f=="string"?"":f.title;return{original:d,thumbnail:d,originalTitle:m,thumbnailTitle:m}}):[];return l("div",{style:{display:"flex",flexDirection:"column"},children:[l("div",{style:{display:"flex",flexDirection:"row",height:(n==null?void 0:n.height)||"400px"},children:[l("div",{className:$.tabsContainer,children:[l(Me,{value:i,onChange:g,children:[Object.keys(r).map(f=>e(Y,{label:f},f)),(p||c)&&s.length>0&&e(Y,{label:"Gallery"})]}),Object.entries(r).map(([f,d],m)=>e("div",{role:"tabpanel",hidden:i!==m,id:`tabpanel-${m}`,children:i===m&&e(G,{sx:{p:1},children:d.map(v=>{if(!t.properties)return null;let u=null,y="",M="",S=!1,L=!0,E="div",N="subtitle1";return typeof v=="string"?(y=v,u=t.properties[v]):(y=v.key,u=t.properties[v.key],M=v.className||"",S=v.isHtml||!1,L=!1),L&&(typeof u=="string"||typeof u=="number"||typeof u=="boolean")?l(w,{variant:"subtitle1",children:[l("strong",{children:[y,":"]}),l("span",{children:[" ",String(u)]})]},y):(typeof u=="object"&&u!==null&&(u=JSON.stringify(u,null,2),E="pre",N="body2"),l("div",{style:{marginBottom:"8px"},children:[e(w,{variant:"subtitle1",children:l("strong",{children:[y,":"]})}),u&&!S&&e(w,{component:E,variant:N,className:M,children:String(u)}),u&&S&&e(w,{component:"div",className:M,dangerouslySetInnerHTML:{__html:u}})]},y))})})},f)),(p||c)&&s.length>0&&e("div",{role:"tabpanel",hidden:i!==Object.keys(r).length,id:`tabpanel-${Object.keys(r).length}`,style:{display:i===Object.keys(r).length?"block":"none"},children:i===Object.keys(r).length&&e(G,{sx:{p:1},children:e(Ie,{items:s,showNav:!1,showPlayButton:!1})})})]}),!(p||c)&&s.length>0&&e("div",{style:{width:"50%",flex:1},children:e(Ie,{items:s,showNav:!1,showPlayButton:!1})})]}),o&&e("div",{style:{height:"30px",borderTop:"1px solid #ccc",display:"flex",justifyContent:"flex-end",alignItems:"center"},children:o})]})},Ee=({data:t,popupTabMapping:r,popupTabMappingExtra:n,popupOpenHandler:o,contextMenuHandler:i,popupProps:a,popupContainerProps:h,popupActionButtons:p})=>{const c=z((d,m)=>{var S,L,E,N,B,F;const v=((L=(S=d.properties)==null?void 0:S.style)==null?void 0:L.icon)||"fa/FaMapMarker",u=((N=(E=d.properties)==null?void 0:E.style)==null?void 0:N.color)||"grey",y=((F=(B=d.properties)==null?void 0:B.style)==null?void 0:F.innerIconColor)||u,M=Dr(v,u,y);return J.marker(m,{icon:M})},[]),g=ae(()=>({General:["name","url",{key:"description",className:$.scrollableContent}]}),[]),s=z(({feature:d,layer:m,popupTabMapping:v,popupContainerProps:u,bottomMenu:y})=>{const M=m.getPopup();if(M){const S=J.DomUtil.create("div");Ae(S).render(e(Tr,{feature:d,tabMapping:v,containerProps:u,bottomMenu:y})),M.setContent(S)}},[]),b=o||s,f=Object.assign({},r||g,n||{});return e(Qe,{data:t,pointToLayer:c,onEachFeature:(d,m)=>{d.properties&&(d.properties.name&&m.bindTooltip(`${d.properties.name}`,{permanent:!1,direction:"auto"}),m.bindPopup("",{...a||{}}),m.on("popupopen",()=>{const v=e(W,{children:p==null?void 0:p.map((u,y)=>e(ye,{startIcon:u==null?void 0:u.startIcon,endIcon:u==null?void 0:u.endIcon,onClick:()=>{u.onClick(d)},children:u.label},y))});b({feature:d,layer:m,popupTabMapping:f,popupContainerProps:h,bottomMenu:v})}),i&&m.on("contextmenu",v=>{i({event:v,feature:d})}))}})},Vr="_contextMenu_j0zss_1",Gr="_contextMenuItem_j0zss_10",Fe={contextMenu:Vr,contextMenuItem:Gr},He=({...t})=>{const r=n=>{n.stopPropagation(),t.payload&&t.handler(t.payload),t.closeMenu&&t.closeMenu()};return e("div",{className:Fe.contextMenuItem,onClick:r,children:t.title})},Wr=({position:t,onClose:r,children:n,payload:o={}})=>{const[i,a]=x(!!t);j(()=>{a(!!t)},[t]);const h=()=>{a(!1),r==null||r()};return i?e("div",{className:Fe.contextMenu,style:{position:"absolute",left:t==null?void 0:t.x,top:t==null?void 0:t.y},children:T.Children.map(n,p=>T.cloneElement(p,{closeMenu:h,payload:o}))}):null},Fr=({...t})=>{const[r,n]=x(null),[o,i]=x(null),a=je({contextmenu:p=>{p.originalEvent.preventDefault(),h(p.latlng)},click:()=>{setTimeout(()=>{n(null)},100)}}),h=z(p=>{const{lat:c,lng:g}=p;i({lat:c,lng:g});const s=a.latLngToContainerPoint(p);n({x:s.x,y:s.y})},[a]);return j(()=>{t.latlng?h(t.latlng):(i(null),n(null))},[t.latlng,h]),e(W,{children:r&&e(Wr,{position:r,onClose:()=>n(null),payload:{coordinates:o},children:t.children})})},Rr=({...t})=>{const{addFeature:r}=se(oe),n=(a,h)=>{let p=h;if(!p){const c=prompt("Enter new name for feature");if(!c)return re.warn("Action cancelled"),null;const g=a.coordinates,s=ft();p={type:"Feature",properties:{id:s,name:c||`Location ${s}`},geometry:{type:"Point",coordinates:[g.lng,g.lat]}}}return re.success("Saved"),p},o=(a,h)=>{const p=n(a,h);p&&navigator.clipboard.writeText(JSON.stringify(p,null,2)).then(()=>{re.success("Copied feature to clipboard")}).catch(c=>{re.error(`Failed to copy feature to clipboard. ${c}`)})},i=(a,h)=>{const p=n(a,h);p&&r(P,p)};return t.menuLatLng?l(Fr,{latlng:t.menuLatLng,children:[e(He,{title:"Copy feature to clipboard",handler:a=>{o(a,t.selectedFeature)}}),e(He,{title:"Save feature to list",handler:a=>{i(a,t.selectedFeature)}})]}):null},$r=({geoJsonOverlaySources:t,...r})=>{const{addFeature:n,savedFeatures:o}=se(oe),[i,a]=x(null),[h,p]=x(null),[c,g]=x(!1),[s,b]=x([]),[f,d]=x([]),m=ae(()=>Object.keys(t),[t]),v=fr(m),u=ze(),y=K(u.breakpoints.down("sm")),M=K(u.breakpoints.between("sm","md")),S=K(u.breakpoints.between("md","lg")),[L,E]=x({}),[N,B]=x({});j(()=>{const H=S?600:M?450:y?275:900,R=S?450:M?400:y?350:500;E({minWidth:H,maxWidth:H,maxHeight:R,autoPanPadding:S?J.point(100,300):M?J.point(10,420):y?J.point(50,100):J.point(160,500)}),B({height:R})},[y,M,S,E,B]);const F=z(H=>{J.DomEvent.stopPropagation(H),H.originalEvent.preventDefault(),a(H.latlng),p(null)},[]),q=z(({event:H,feature:R})=>{J.DomEvent.stopPropagation(H),a(H.latlng),p(R)},[]),he=z(H=>{n(P,H),re.success("Saved")},[n]);return j(()=>{!v.loading&&!v.error&&b(Object.entries(t).map(([H,R])=>{var Oe;const Q=v[H];return{name:(Oe=Q==null?void 0:Q.properties)==null?void 0:Oe.style.layerName,children:e(Ee,{data:Q,popupTabMapping:R,contextMenuHandler:q,popupProps:L,popupContainerProps:N,popupActionButtons:[{label:"Save",startIcon:e(Ct,{}),onClick:he}]})}}))},[t,v,q,L,N,he]),j(()=>{d(Object.entries(o).map(([H,R])=>({name:`- ${H}`,children:e(Ee,{data:{type:"FeatureCollection",features:R,properties:{}},contextMenuHandler:q,popupProps:L,popupTabMappingExtra:{Notes:[{key:"tripNotes",className:$.scrollableContent,isHtml:!0}]},popupContainerProps:N},Date.now())})))},[o,q,L,N]),l(W,{children:[e(Ut,{overlays:[...s,...f],contextMenuHandler:F,...r,children:e(Rr,{selectedFeature:h,menuLatLng:i})}),e(gr,{drawerOpen:c,onClose:()=>g(!c)})]})},Jr=()=>{const t=ae(()=>({lat:-31.953512,lng:115.857048}),[]),r=ae(()=>({"./markers/westernAustralia/gas_stations_openstreetmap.json":{General:["name","brand","operator","opening_hours"]},"./markers/westernAustralia/gas_stations_fuelwatch.json":{General:["name","brandName","manned","operates247"]},"./markers/westernAustralia/gas_stations_bp.json":{General:["name","address",{key:"facilities",className:$.scrollableContent}],"More Info":[{key:"products",className:$.scrollableContent},"website","telephone"]},"./markers/westernAustralia/national_parks_simplified.json":{General:["name","url",{key:"description",className:$.scrollableContent}]},"./markers/westernAustralia/accommodation_WA.json":{General:["name","website","tarif","isBookable"],"More Info":["operatorName","GroupName","CheckInTime","CheckOutTime","email","address","hours"]},"./markers/westernAustralia/accommodation_campermate.json":{General:["name","fees","bookable",{key:"description",className:$.scrollableContent}],Score:["score","thumbs_up","thumbs_down"]},"./markers/westernAustralia/western_australia_tourism.json":{General:["name","url",{key:"description",className:$.scrollableContent}]},"./markers/westernAustralia/western_australia_visitor_centre.json":{General:["name","type",{key:"description",className:$.scrollableContent},{key:"pointOfDifference",className:$.scrollableContent}],Info:["address","hours","email","website"]},"./markers/westernAustralia/places.json":{General:["name"]}}),[]);return e($r,{center:t,geoJsonOverlaySources:r})};function Ur(){const[t,r]=x(!1);return j(()=>{localStorage.getItem("hasShownModal")||r(!0)},[]),l(W,{children:[e(Gt,{children:e(Jr,{})}),e(Ge,{open:t,onClose:()=>{r(!1)}})]})}Ae(document.getElementById("root")).render(l(T.StrictMode,{children:[e(Ur,{}),e(Re,{})]}));
